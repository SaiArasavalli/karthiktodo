"use strict";(self.webpackChunkkarthiktodo=self.webpackChunkkarthiktodo||[]).push([[179],{544:()=>{function xe(t){return"function"==typeof t}function ic(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const oc=ic(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function js(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Cn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(xe(r))try{r()}catch(o){e=o instanceof oc?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{oE(o)}catch(s){e=e??[],s instanceof oc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new oc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)oE(e);else{if(e instanceof Cn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&js(n,e)}remove(e){const{_finalizers:n}=this;n&&js(n,e),e instanceof Cn&&e._removeParent(this)}}Cn.EMPTY=(()=>{const t=new Cn;return t.closed=!0,t})();const rE=Cn.EMPTY;function iE(t){return t instanceof Cn||t&&"closed"in t&&xe(t.remove)&&xe(t.add)&&xe(t.unsubscribe)}function oE(t){xe(t)?t():t.unsubscribe()}const ii={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},sc={setTimeout(t,e,...n){const{delegate:r}=sc;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=sc;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function sE(t){sc.setTimeout(()=>{const{onUnhandledError:e}=ii;if(!e)throw t;e(t)})}function aE(){}const yN=jh("C",void 0,void 0);function jh(t,e,n){return{kind:t,value:e,error:n}}let oi=null;function ac(t){if(ii.useDeprecatedSynchronousErrorHandling){const e=!oi;if(e&&(oi={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=oi;if(oi=null,n)throw r}}else t()}class Uh extends Cn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,iE(e)&&e.add(this)):this.destination=CN}static create(e,n,r){return new Us(e,n,r)}next(e){this.isStopped?Hh(function EN(t){return jh("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Hh(function vN(t){return jh("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hh(yN,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const DN=Function.prototype.bind;function $h(t,e){return DN.call(t,e)}class wN{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){uc(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){uc(r)}else uc(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){uc(n)}}}class Us extends Uh{constructor(e,n,r){let i;if(super(),xe(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&ii.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&$h(e.next,o),error:e.error&&$h(e.error,o),complete:e.complete&&$h(e.complete,o)}):i=e}this.destination=new wN(i)}}function uc(t){ii.useDeprecatedSynchronousErrorHandling?function IN(t){ii.useDeprecatedSynchronousErrorHandling&&oi&&(oi.errorThrown=!0,oi.error=t)}(t):sE(t)}function Hh(t,e){const{onStoppedNotification:n}=ii;n&&sc.setTimeout(()=>n(t,e))}const CN={closed:!0,next:aE,error:function TN(t){throw t},complete:aE},Gh="function"==typeof Symbol&&Symbol.observable||"@@observable";function qh(t){return t}let At=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function bN(t){return t&&t instanceof Uh||function AN(t){return t&&xe(t.next)&&xe(t.error)&&xe(t.complete)}(t)&&iE(t)}(n)?n:new Us(n,r,i);return ac(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=cE(r))((i,o)=>{const s=new Us({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Gh](){return this}pipe(...n){return function uE(t){return 0===t.length?qh:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=cE(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function cE(t){var e;return null!==(e=t??ii.Promise)&&void 0!==e?e:Promise}const SN=ic(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let cc=(()=>{class t extends At{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new lE(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new SN}next(n){ac(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){ac(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ac(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?rE:(this.currentObservers=null,o.push(n),new Cn(()=>{this.currentObservers=null,js(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new At;return n.source=this,n}}return t.create=(e,n)=>new lE(e,n),t})();class lE extends cc{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:rE}}function si(t){return e=>{if(function MN(t){return xe(t?.lift)}(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function vr(t,e,n,r,i){return new RN(t,e,n,r,i)}class RN extends Uh{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function zh(t,e){return si((n,r)=>{let i=0;n.subscribe(vr(r,o=>{r.next(t.call(e,o,i++))}))})}function Er(t){return this instanceof Er?(this.v=t,this):new Er(t)}function pE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Yh(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){!function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}(a,u,(s=t[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const gE=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function mE(t){return xe(t?.then)}function _E(t){return xe(t[Gh])}function yE(t){return Symbol.asyncIterator&&xe(t?.[Symbol.asyncIterator])}function vE(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const EE=function XN(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function IE(t){return xe(t?.[EE])}function DE(t){return function fE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){o.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function u(h){h.value instanceof Er?Promise.resolve(h.value.v).then(c,l):d(o[0][2],h)}(r[h](f))}catch(p){d(o[0][3],p)}}function c(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield Er(n.read());if(i)return yield Er(void 0);yield yield Er(r)}}finally{n.releaseLock()}})}function wE(t){return xe(t?.getReader)}function An(t){if(t instanceof At)return t;if(null!=t){if(_E(t))return function JN(t){return new At(e=>{const n=t[Gh]();if(xe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(gE(t))return function e1(t){return new At(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(mE(t))return function t1(t){return new At(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,sE)})}(t);if(yE(t))return TE(t);if(IE(t))return function n1(t){return new At(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(wE(t))return function r1(t){return TE(DE(t))}(t)}throw vE(t)}function TE(t){return new At(e=>{(function i1(t,e){var n,r,i,o;return function dE(t,e,n,r){return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(l.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=pE(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Ir(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function CE(t,e,n=1/0){return xe(e)?CE((r,i)=>zh((o,s)=>e(r,o,i,s))(An(t(r,i))),n):("number"==typeof e&&(n=e),si((r,i)=>function o1(t,e,n,r,i,o,s,a){const u=[];let c=0,l=0,d=!1;const h=()=>{d&&!u.length&&!c&&e.complete()},f=g=>c<r?p(g):u.push(g),p=g=>{o&&e.next(g),c++;let m=!1;An(n(g,l++)).subscribe(vr(e,E=>{i?.(E),o?f(E):e.next(E)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;u.length&&c<r;){const E=u.shift();s?Ir(e,s,()=>p(E)):p(E)}h()}catch(E){e.error(E)}}))};return t.subscribe(vr(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,t,n)))}const AE=new At(t=>t.complete());function Zh(t){return t[t.length-1]}function bE(t){return function u1(t){return t&&xe(t.schedule)}(Zh(t))?t.pop():void 0}function SE(t,e=0){return si((n,r)=>{n.subscribe(vr(r,i=>Ir(r,t,()=>r.next(i),e),()=>Ir(r,t,()=>r.complete(),e),i=>Ir(r,t,()=>r.error(i),e)))})}function ME(t,e=0){return si((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function RE(t,e){if(!t)throw new Error("Iterable cannot be null");return new At(n=>{Ir(n,e,()=>{const r=t[Symbol.asyncIterator]();Ir(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Xh(t,e){return e?function m1(t,e){if(null!=t){if(_E(t))return function d1(t,e){return An(t).pipe(ME(e),SE(e))}(t,e);if(gE(t))return function f1(t,e){return new At(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(mE(t))return function h1(t,e){return An(t).pipe(ME(e),SE(e))}(t,e);if(yE(t))return RE(t,e);if(IE(t))return function p1(t,e){return new At(n=>{let r;return Ir(n,e,()=>{r=t[EE](),Ir(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>xe(r?.return)&&r.return()})}(t,e);if(wE(t))return function g1(t,e){return RE(DE(t),e)}(t,e)}throw vE(t)}(t,e):An(t)}function _1(...t){const e=bE(t),n=function l1(t,e){return"number"==typeof Zh(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?An(r[0]):function s1(t=1/0){return CE(qh,t)}(n)(Xh(r,e)):AE}class y1 extends cc{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function PE(t={}){const{connector:e=(()=>new cc),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,c=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=u=void 0,l=d=!1},p=()=>{const g=s;f(),g?.unsubscribe()};return si((g,m)=>{c++,!d&&!l&&h();const E=u=u??e();m.add(()=>{c--,0===c&&!d&&!l&&(a=Jh(p,i))}),E.subscribe(m),!s&&c>0&&(s=new Us({next:_=>E.next(_),error:_=>{d=!0,h(),a=Jh(f,n,_),E.error(_)},complete:()=>{l=!0,h(),a=Jh(f,r),E.complete()}}),An(g).subscribe(s))})(o)}}function Jh(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Us({next:()=>{r.unsubscribe(),t()}});return An(e(...n)).subscribe(r)}function D1(t,e){return t===e}function le(t){for(let e in t)if(t[e]===le)return e;throw Error("Could not find renamed property on target object.")}function lc(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ke(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ke).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function ef(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const w1=le({__forward_ref__:le});function ve(t){return t.__forward_ref__=ve,t.toString=function(){return Ke(this())},t}function j(t){return tf(t)?t():t}function tf(t){return"function"==typeof t&&t.hasOwnProperty(w1)&&t.__forward_ref__===ve}function nf(t){return t&&!!t.\u0275providers}class b extends Error{constructor(e,n){super(function dc(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function $(t){return"string"==typeof t?t:null==t?"":String(t)}function rf(t,e){throw new b(-201,!1)}function rn(t,e){null==t&&function L(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function de(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Wn(t){return{providers:t.providers||[],imports:t.imports||[]}}function hc(t){return NE(t,pc)||NE(t,VE)}function NE(t,e){return t.hasOwnProperty(e)?t[e]:null}function fc(t){return t&&(t.hasOwnProperty(of)||t.hasOwnProperty(R1))?t[of]:null}const pc=le({\u0275prov:le}),of=le({\u0275inj:le}),VE=le({ngInjectableDef:le}),R1=le({ngInjectorDef:le});var ee=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ee||{});let sf;function Lt(t){const e=sf;return sf=t,e}function FE(t,e,n){const r=hc(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ee.Optional?null:void 0!==e?e:void rf(Ke(t))}const Ee=globalThis;class k{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=de({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const $s={},df="__NG_DI_FLAG__",gc="ngTempTokenPath",N1=/\n/gm,LE="__source";let Yi;function Dr(t){const e=Yi;return Yi=t,e}function F1(t,e=ee.Default){if(void 0===Yi)throw new b(-203,!1);return null===Yi?FE(t,void 0,e):Yi.get(t,e&ee.Optional?null:void 0,e)}function te(t,e=ee.Default){return(function OE(){return sf}()||F1)(j(t),e)}function _e(t,e=ee.Default){return te(t,mc(e))}function mc(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function hf(t){const e=[];for(let n=0;n<t.length;n++){const r=j(t[n]);if(Array.isArray(r)){if(0===r.length)throw new b(900,!1);let i,o=ee.Default;for(let s=0;s<r.length;s++){const a=r[s],u=k1(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(te(i,o))}else e.push(te(r))}return e}function Hs(t,e){return t[df]=e,t.prototype[df]=e,t}function k1(t){return t[df]}function Qn(t){return{toString:t}.toString()}var _c=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(_c||{}),fn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(fn||{});const bn={},se=[],yc=le({\u0275cmp:le}),ff=le({\u0275dir:le}),pf=le({\u0275pipe:le}),jE=le({\u0275mod:le}),Kn=le({\u0275fac:le}),Gs=le({__NG_ELEMENT_ID__:le}),UE=le({__NG_ENV_ID__:le});function $E(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function gf(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];GE(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function HE(t){return 3===t||4===t||6===t}function GE(t){return 64===t.charCodeAt(0)}function qs(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||qE(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function qE(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}const zE="ng-template";function j1(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if("string"==typeof o&&i){const s=t[r++];if(n&&"class"===o&&-1!==$E(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;r<t.length&&"string"==typeof(o=t[r++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function WE(t){return 4===t.type&&t.value!==zE}function U1(t,e,n){return e===(4!==t.type||n?t.value:zE)}function $1(t,e,n){let r=4;const i=t.attrs||[],o=function q1(t){for(let e=0;e<t.length;e++)if(HE(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!U1(t,u,n)||""===u&&1===e.length){if(pn(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!j1(t.attrs,c,n)){if(pn(r))return!1;s=!0}continue}const d=H1(8&r?"class":u,i,WE(t),n);if(-1===d){if(pn(r))return!1;s=!0;continue}if(""!==c){let h;h=d>o?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==$E(f,c,0)||2&r&&c!==h){if(pn(r))return!1;s=!0}}}}else{if(!s&&!pn(r)&&!pn(u))return!1;if(s&&pn(u))continue;s=!1,r=u|1&r}}return pn(r)||s}function pn(t){return 0==(1&t)}function H1(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function z1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function QE(t,e,n=!1){for(let r=0;r<e.length;r++)if($1(t,e[r],n))return!0;return!1}function KE(t,e){return t?":not("+e.trim()+")":e}function Q1(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!pn(s)&&(e+=KE(o,i),i=""),r=s,o=o||!pn(r);n++}return""!==i&&(e+=KE(o,i)),e}function YE(t){return Qn(()=>{const e=XE(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===_c.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||fn.Emulated,styles:t.styles||se,_:null,schemas:t.schemas||null,tView:null,id:""};JE(n);const r=t.dependencies;return n.directiveDefs=vc(r,!1),n.pipeDefs=vc(r,!0),n.id=function nV(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function X1(t){return ne(t)||st(t)}function J1(t){return null!==t}function wr(t){return Qn(()=>({type:t.type,bootstrap:t.bootstrap||se,declarations:t.declarations||se,imports:t.imports||se,exports:t.exports||se,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ZE(t,e){if(null==t)return bn;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}function q(t){return Qn(()=>{const e=XE(t);return JE(e),e})}function ne(t){return t[yc]||null}function st(t){return t[ff]||null}function bt(t){return t[pf]||null}function XE(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||bn,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||se,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ZE(t.inputs,e),outputs:ZE(t.outputs)}}function JE(t){t.features?.forEach(e=>e(t))}function vc(t,e){if(!t)return null;const n=e?bt:X1;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(J1)}const Oe=0,P=1,Q=2,Se=3,gn=4,Ws=5,gt=6,Zi=7,je=8,Tr=9,Xi=10,H=11,Qs=12,eI=13,Ji=14,Ue=15,Ks=16,eo=17,Sn=18,Ys=19,tI=20,Cr=21,Yn=22,Zs=23,Xs=24,Y=25,mf=1,nI=2,Mn=7,to=9,at=11;function jt(t){return Array.isArray(t)&&"object"==typeof t[mf]}function St(t){return Array.isArray(t)&&!0===t[mf]}function _f(t){return 0!=(4&t.flags)}function ui(t){return t.componentOffset>-1}function Ic(t){return 1==(1&t.flags)}function mn(t){return!!t.template}function yf(t){return 0!=(512&t[Q])}function ci(t,e){return t.hasOwnProperty(Kn)?t[Kn]:null}let ut=null,Dc=!1;function on(t){const e=ut;return ut=t,e}const oI={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function aI(t){if(!ea(t)||t.dirty){if(!t.producerMustRecompute(t)&&!lI(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function cI(t){t.dirty=!0,function uI(t){if(void 0===t.liveConsumerNode)return;const e=Dc;Dc=!0;try{for(const n of t.liveConsumerNode)n.dirty||cI(n)}finally{Dc=e}}(t),t.consumerMarkedDirty?.(t)}function Ef(t){return t&&(t.nextProducerIndex=0),on(t)}function If(t,e){if(on(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(ea(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)wc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function lI(t){no(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(aI(n),r!==n.version))return!0}return!1}function dI(t){if(no(t),ea(t))for(let e=0;e<t.producerNode.length;e++)wc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function wc(t,e){if(function fI(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),no(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)wc(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];no(i),i.producerIndexOfThis[r]=e}}function ea(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function no(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let pI=null;const yI=()=>{},gV=(()=>({...oI,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:yI}))();class mV{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Zn(){return vI}function vI(t){return t.type.prototype.ngOnChanges&&(t.setInput=yV),_V}function _V(){const t=II(this),e=t?.current;if(e){const n=t.previous;if(n===bn)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function yV(t,e,n,r){const i=this.declaredInputs[n],o=II(t)||function vV(t,e){return t[EI]=e}(t,{previous:bn,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new mV(u&&u.currentValue,e,a===bn),t[r]=e}Zn.ngInherit=!0;const EI="__ngSimpleChanges__";function II(t){return t[EI]||null}const Rn=function(t,e,n){};function Ie(t){for(;Array.isArray(t);)t=t[Oe];return t}function Tc(t,e){return Ie(e[t])}function Ut(t,e){return Ie(e[t.index])}function TI(t,e){return t.data[e]}function Kt(t,e){const n=e[t];return jt(n)?n:n[Oe]}function br(t,e){return null==e?null:t[e]}function CI(t){t[eo]=0}function CV(t){1024&t[Q]||(t[Q]|=1024,bI(t,1))}function AI(t){1024&t[Q]&&(t[Q]&=-1025,bI(t,-1))}function bI(t,e){let n=t[Se];if(null===n)return;n[Ws]+=e;let r=n;for(n=n[Se];null!==n&&(1===e&&1===r[Ws]||-1===e&&0===r[Ws]);)n[Ws]+=e,r=n,n=n[Se]}const B={lFrame:LI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function RI(){return B.bindingsEnabled}function D(){return B.lFrame.lView}function re(){return B.lFrame.tView}function ct(){let t=PI();for(;null!==t&&64===t.type;)t=t.parent;return t}function PI(){return B.lFrame.currentTNode}function Pn(t,e){const n=B.lFrame;n.currentTNode=t,n.isParent=e}function Af(){return B.lFrame.isParent}function oo(){return B.lFrame.bindingIndex++}function BV(t,e){const n=B.lFrame;n.bindingIndex=n.bindingRootIndex=t,Sf(e)}function Sf(t){B.lFrame.currentDirectiveIndex=t}function Rf(t){B.lFrame.currentQueryIndex=t}function UV(t){const e=t[P];return 2===e.type?e.declTNode:1===e.type?t[gt]:null}function FI(t,e,n){if(n&ee.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&ee.Host||(i=UV(o),null===i||(o=o[Ji],10&i.type))););if(null===i)return!1;e=i,t=o}const r=B.lFrame=kI();return r.currentTNode=e,r.lView=t,!0}function Pf(t){const e=kI(),n=t[P];B.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function kI(){const t=B.lFrame,e=null===t?null:t.child;return null===e?LI(t):e}function LI(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function BI(){const t=B.lFrame;return B.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const jI=BI;function xf(){const t=BI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Rt(){return B.lFrame.selectedIndex}function li(t){B.lFrame.selectedIndex=t}let $I=!0;function Cc(){return $I}function Sr(t){$I=t}function Ac(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),null!=l&&(t.destroyHooks??=[]).push(n,l)}}function bc(t,e,n){HI(t,e,3,n)}function Sc(t,e,n,r){(3&t[Q])===n&&HI(t,e,n,r)}function Nf(t,e){let n=t[Q];(3&n)===e&&(n&=8191,n+=1,t[Q]=n)}function HI(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&t[eo]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[eo]+=65536),(a<o||-1==o)&&(KV(t,n,e,u),t[eo]=(4294901760&t[eo])+u+2),u++}function GI(t,e){Rn(4,t,e);const n=on(null);try{e.call(t)}finally{on(n),Rn(5,t,e)}}function KV(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[Q]>>13<t[eo]>>16&&(3&t[Q])===e&&(t[Q]+=8192,GI(a,o)):GI(a,o)}const so=-1;class na{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Of(t){return t!==so}function ra(t){return 32767&t}function ia(t,e){let n=function JV(t){return t>>16}(t),r=e;for(;n>0;)r=r[Ji],n--;return r}let Ff=!0;function Mc(t){const e=Ff;return Ff=t,e}const qI=255,zI=5;let eO=0;const xn={};function Rc(t,e){const n=WI(t,e);if(-1!==n)return n;const r=e[P];r.firstCreatePass&&(t.injectorIndex=e.length,kf(r.data,t),kf(e,null),kf(r.blueprint,null));const i=Pc(t,e),o=t.injectorIndex;if(Of(i)){const s=ra(i),a=ia(i,e),u=a[P].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|u[s+c]}return e[o+8]=i,o}function kf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function WI(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Pc(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=eD(i),null===r)return so;if(n++,i=i[Ji],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return so}function Lf(t,e,n){!function tO(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Gs)&&(r=n[Gs]),null==r&&(r=n[Gs]=eO++);const i=r&qI;e.data[t+(i>>zI)]|=1<<i}(t,e,n)}function QI(t,e,n){if(n&ee.Optional||void 0!==t)return t;rf()}function KI(t,e,n,r){if(n&ee.Optional&&void 0===r&&(r=null),!(n&(ee.Self|ee.Host))){const i=t[Tr],o=Lt(void 0);try{return i?i.get(e,r,n&ee.Optional):FE(e,r,n&ee.Optional)}finally{Lt(o)}}return QI(r,0,n)}function YI(t,e,n,r=ee.Default,i){if(null!==t){if(2048&e[Q]&&!(r&ee.Self)){const s=function aO(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[Q]&&!(512&s[Q]);){const a=ZI(o,s,n,r|ee.Self,xn);if(a!==xn)return a;let u=o.parent;if(!u){const c=s[tI];if(c){const l=c.get(n,xn,r);if(l!==xn)return l}u=eD(s),s=s[Ji]}o=u}return i}(t,e,n,r,xn);if(s!==xn)return s}const o=ZI(t,e,n,r,xn);if(o!==xn)return o}return KI(e,n,r,i)}function ZI(t,e,n,r,i){const o=function iO(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Gs)?t[Gs]:void 0;return"number"==typeof e?e>=0?e&qI:sO:e}(n);if("function"==typeof o){if(!FI(e,t,r))return r&ee.Host?QI(i,0,r):KI(e,n,r,i);try{let s;if(s=o(r),null!=s||r&ee.Optional)return s;rf()}finally{jI()}}else if("number"==typeof o){let s=null,a=WI(t,e),u=so,c=r&ee.Host?e[Ue][gt]:null;for((-1===a||r&ee.SkipSelf)&&(u=-1===a?Pc(t,e):e[a+8],u!==so&&JI(r,!1)?(s=e[P],a=ra(u),e=ia(u,e)):a=-1);-1!==a;){const l=e[P];if(XI(o,a,l.data)){const d=rO(a,e,n,s,r,c);if(d!==xn)return d}u=e[a+8],u!==so&&JI(r,e[P].data[a+8]===c)&&XI(o,a,e)?(s=l,a=ra(u),e=ia(u,e)):a=-1}}return i}function rO(t,e,n,r,i,o){const s=e[P],a=s.data[t+8],l=function xc(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,l=o>>20,h=i?a+l:t.directiveEnd;for(let f=r?a:a+l;f<h;f++){const p=s[f];if(f<u&&n===p||f>=u&&p.type===n)return f}if(i){const f=s[u];if(f&&mn(f)&&f.type===n)return u}return null}(a,s,n,null==r?ui(a)&&Ff:r!=s&&0!=(3&a.type),i&ee.Host&&o===a);return null!==l?di(e,s,l,a):xn}function di(t,e,n,r){let i=t[n];const o=e.data;if(function YV(t){return t instanceof na}(i)){const s=i;s.resolving&&function T1(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new b(-200,`Circular dependency in DI detected for ${t}${n}`)}(function ce(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():$(t)}(o[n]));const a=Mc(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?Lt(s.injectImpl):null;FI(t,r,ee.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function QV(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=vI(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==c&&Lt(c),Mc(a),s.resolving=!1,jI()}}return i}function XI(t,e,n){return!!(n[e+(t>>zI)]&1<<t)}function JI(t,e){return!(t&ee.Self||t&ee.Host&&e)}class Pt{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return YI(this._tNode,this._lView,e,mc(r),n)}}function sO(){return new Pt(ct(),D())}function Bf(t){return tf(t)?()=>{const e=Bf(j(t));return e&&e()}:ci(t)}function eD(t){const e=t[P],n=e.type;return 2===n?e.declTNode:1===n?t[gt]:null}const uo="__parameters__";function lo(t,e,n){return Qn(()=>{const r=function Uf(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,c,l){const d=u.hasOwnProperty(uo)?u[uo]:Object.defineProperty(u,uo,{value:[]})[uo];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function fo(t,e){t.forEach(n=>Array.isArray(n)?fo(n,e):e(n))}function nD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Nc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Yt(t,e,n){let r=po(t,e);return r>=0?t[1|r]=n:(r=~r,function pO(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function $f(t,e){const n=po(t,e);if(n>=0)return t[1|n]}function po(t,e){return function rD(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const Gf=Hs(lo("Optional"),8),qf=Hs(lo("SkipSelf"),4);function Bc(t){return 128==(128&t.flags)}var Mr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Mr||{});const Kf=new Map;let LO=0;const Zf="__ngContext__";function _t(t,e){jt(e)?(t[Zf]=e[Ys],function jO(t){Kf.set(t[Ys],t)}(e)):t[Zf]=e}let Xf;function Jf(t,e){return Xf(t,e)}function la(t){const e=t[Se];return St(e)?e[Se]:e}function wD(t){return CD(t[Qs])}function TD(t){return CD(t[gn])}function CD(t){for(;null!==t&&!St(t);)t=t[gn];return t}function _o(t,e,n,r,i){if(null!=r){let o,s=!1;St(r)?o=r:jt(r)&&(s=!0,r=r[Oe]);const a=Ie(r);0===t&&null!==n?null==i?MD(e,n,a):hi(e,n,a,i||null,!0):1===t&&null!==n?hi(e,n,a,i||null,!0):2===t?function zc(t,e,n){const r=Gc(t,e);r&&function oF(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function uF(t,e,n,r,i){const o=n[Mn];o!==Ie(n)&&_o(e,t,r,o,i);for(let a=at;a<n.length;a++){const u=n[a];ha(u[P],u,t,e,r,o)}}(e,t,o,n,i)}}function $c(t,e,n){return t.createElement(e,n)}function bD(t,e){const n=t[to],r=n.indexOf(e);AI(e),n.splice(r,1)}function Hc(t,e){if(t.length<=at)return;const n=at+e,r=t[n];if(r){const i=r[Ks];null!==i&&i!==t&&bD(i,r),e>0&&(t[n-1][gn]=r[gn]);const o=Nc(t,at+e);!function ZO(t,e){ha(t,e,e[H],2,null,null),e[Oe]=null,e[gt]=null}(r[P],r);const s=o[Sn];null!==s&&s.detachView(o[P]),r[Se]=null,r[gn]=null,r[Q]&=-129}return r}function tp(t,e){if(!(256&e[Q])){const n=e[H];e[Zs]&&dI(e[Zs]),e[Xs]&&dI(e[Xs]),n.destroyNode&&ha(t,e,n,3,null,null),function eF(t){let e=t[Qs];if(!e)return np(t[P],t);for(;e;){let n=null;if(jt(e))n=e[Qs];else{const r=e[at];r&&(n=r)}if(!n){for(;e&&!e[gn]&&e!==t;)jt(e)&&np(e[P],e),e=e[Se];null===e&&(e=t),jt(e)&&np(e[P],e),n=e&&e[gn]}e=n}}(e)}}function np(t,e){if(!(256&e[Q])){e[Q]&=-129,e[Q]|=256,function iF(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof na)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];Rn(4,a,u);try{u.call(a)}finally{Rn(5,a,u)}}else{Rn(4,i,o);try{o.call(i)}finally{Rn(5,i,o)}}}}}(t,e),function rF(t,e){const n=t.cleanup,r=e[Zi];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(e[Zi]=null);const i=e[Cr];if(null!==i){e[Cr]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(t,e),1===e[P].type&&e[H].destroy();const n=e[Ks];if(null!==n&&St(e[Se])){n!==e[Se]&&bD(n,e);const r=e[Sn];null!==r&&r.detachView(t)}!function UO(t){Kf.delete(t[Ys])}(e)}}function rp(t,e,n){return function SD(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Oe];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===fn.None||o===fn.Emulated)return null}return Ut(r,n)}}(t,e.parent,n)}function hi(t,e,n,r,i){t.insertBefore(e,n,r,i)}function MD(t,e,n){t.appendChild(e,n)}function RD(t,e,n,r,i){null!==r?hi(t,e,n,r,i):MD(t,e,n)}function Gc(t,e){return t.parentNode(e)}let ip,up,ND=function xD(t,e,n){return 40&t.type?Ut(t,n):null};function qc(t,e,n,r){const i=rp(t,r,e),o=e[H],a=function PD(t,e,n){return ND(t,e,n)}(r.parent||e[gt],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)RD(o,i,n[u],a,!1);else RD(o,i,n,a,!1);void 0!==ip&&ip(o,r,e,n,i)}function da(t,e){if(null!==e){const n=e.type;if(3&n)return Ut(e,t);if(4&n)return op(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return da(t,r);{const i=t[e.index];return St(i)?op(-1,i):Ie(i)}}if(32&n)return Jf(e,t)()||Ie(t[e.index]);{const r=OD(t,e);return null!==r?Array.isArray(r)?r[0]:da(la(t[Ue]),r):da(t,e.next)}}return null}function OD(t,e){return null!==e?t[Ue][gt].projection[e.projection]:null}function op(t,e){const n=at+t+1;if(n<e.length){const r=e[n],i=r[P].firstChild;if(null!==i)return da(r,i)}return e[Mn]}function sp(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&_t(Ie(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)sp(t,e,n.child,r,i,o,!1),_o(e,t,i,a,o);else if(32&u){const c=Jf(n,r);let l;for(;l=c();)_o(e,t,i,l,o);_o(e,t,i,a,o)}else 16&u?kD(t,e,r,n,i,o):_o(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ha(t,e,n,r,i,o){sp(n,r,t.firstChild,e,i,o,!1)}function kD(t,e,n,r,i,o){const s=n[Ue],u=s[gt].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)_o(e,t,i,u[c],o);else{let c=u;const l=s[Se];Bc(r)&&(c.flags|=128),sp(t,e,c,l,i,o,!0)}}function LD(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function BD(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&gf(t,e,r),null!==i&&LD(t,e,i),null!==o&&function lF(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}class HD{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const Yc=new k("ENVIRONMENT_INITIALIZER"),XD=new k("INJECTOR",-1),JD=new k("INJECTOR_DEF_TYPES");class pp{get(e,n=$s){if(n===$s){const r=new Error(`NullInjectorError: No provider for ${Ke(e)}!`);throw r.name="NullInjectorError",r}return n}}function LF(...t){return{\u0275providers:tw(0,t),\u0275fromNgModule:!0}}function tw(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return fo(e,s=>{const a=s;Zc(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&nw(i,o),n}function nw(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];gp(i,o=>{e(o,r)})}}function Zc(t,e,n,r){if(!(t=j(t)))return!1;let i=null,o=fc(t);const s=!o&&ne(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const u=t.ngModule;if(o=fc(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of u)Zc(c,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{fo(o.imports,l=>{Zc(l,e,n,r)&&(c||=[],c.push(l))})}finally{}void 0!==c&&nw(c,e)}if(!a){const c=ci(i)||(()=>new i);e({provide:i,useFactory:c,deps:se},i),e({provide:JD,useValue:i,multi:!0},i),e({provide:Yc,useValue:()=>te(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const c=t;gp(u,l=>{e(l,c)})}}}return i!==t&&void 0!==t.providers}function gp(t,e){for(let n of t)nf(n)&&(n=n.\u0275providers),Array.isArray(n)?gp(n,e):e(n)}const BF=le({provide:String,useValue:le});function mp(t){return null!==t&&"object"==typeof t&&BF in t}function fi(t){return"function"==typeof t}const _p=new k("Set Injector scope."),Xc={},UF={};let yp;function Jc(){return void 0===yp&&(yp=new pp),yp}class tr{}class Io extends tr{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ep(e,s=>this.processProvider(s)),this.records.set(XD,Do(void 0,this)),i.has("environment")&&this.records.set(tr,Do(void 0,this));const o=this.records.get(_p);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(JD.multi,se,ee.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Dr(this),r=Lt(void 0);try{return e()}finally{Dr(n),Lt(r)}}get(e,n=$s,r=ee.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(UE))return e[UE](this);r=mc(r);const o=Dr(this),s=Lt(void 0);try{if(!(r&ee.SkipSelf)){let u=this.records.get(e);if(void 0===u){const c=function zF(t){return"function"==typeof t||"object"==typeof t&&t instanceof k}(e)&&hc(e);u=c&&this.injectableDefInScope(c)?Do(vp(e),Xc):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&ee.Self?Jc():this.parent).get(e,n=r&ee.Optional&&n===$s?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[gc]=a[gc]||[]).unshift(Ke(e)),o)throw a;return function L1(t,e,n,r){const i=t[gc];throw e[LE]&&i.unshift(e[LE]),t.message=function B1(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Ke(e);if(Array.isArray(e))i=e.map(Ke).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ke(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(N1,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[gc]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Lt(s),Dr(o)}}resolveInjectorInitializers(){const e=Dr(this),n=Lt(void 0);try{const i=this.get(Yc.multi,se,ee.Self);for(const o of i)o()}finally{Dr(e),Lt(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Ke(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new b(205,!1)}processProvider(e){let n=fi(e=j(e))?e:j(e&&e.provide);const r=function HF(t){return mp(t)?Do(void 0,t.useValue):Do(ow(t),Xc)}(e);if(fi(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Do(void 0,Xc,!0),i.factory=()=>hf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Xc&&(n.value=UF,n.value=n.factory()),"object"==typeof n.value&&n.value&&function qF(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=j(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function vp(t){const e=hc(t),n=null!==e?e.factory:ci(t);if(null!==n)return n;if(t instanceof k)throw new b(204,!1);if(t instanceof Function)return function $F(t){const e=t.length;if(e>0)throw function aa(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new b(204,!1);const n=function M1(t){return t&&(t[pc]||t[VE])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new b(204,!1)}function ow(t,e,n){let r;if(fi(t)){const i=j(t);return ci(i)||vp(i)}if(mp(t))r=()=>j(t.useValue);else if(function iw(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...hf(t.deps||[]));else if(function rw(t){return!(!t||!t.useExisting)}(t))r=()=>te(j(t.useExisting));else{const i=j(t&&(t.useClass||t.provide));if(!function GF(t){return!!t.deps}(t))return ci(i)||vp(i);r=()=>new i(...hf(t.deps))}return r}function Do(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Ep(t,e){for(const n of t)Array.isArray(n)?Ep(n,e):n&&nf(n)?Ep(n.\u0275providers,e):e(n)}const el=new k("AppId",{providedIn:"root",factory:()=>WF}),WF="ng",sw=new k("Platform Initializer"),wo=new k("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),aw=new k("CSP nonce",{providedIn:"root",factory:()=>function vo(){if(void 0!==up)return up;if(typeof document<"u")return document;throw new b(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let uw=(t,e,n)=>null;function Sp(t,e,n=!1){return uw(t,e,n)}class rk{}class dw{}class ok{resolveComponentFactory(e){throw function ik(t){const e=Error(`No component factory found for ${Ke(t)}.`);return e.ngComponent=t,e}(e)}}let sl=(()=>{class t{static#e=this.NULL=new ok}return t})();function sk(){return Ao(ct(),D())}function Ao(t,e){return new _n(Ut(t,e))}let _n=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=sk}return t})();class fw{}let pi=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function uk(){const t=D(),n=Kt(ct().index,t);return(jt(n)?n:t)[H]}()}return t})(),ck=(()=>{class t{static#e=this.\u0275prov=de({token:t,providedIn:"root",factory:()=>null})}return t})();class al{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const lk=new al("16.2.12"),Pp={};function _w(t,e=null,n=null,r){const i=yw(t,e,n,r);return i.resolveInjectorInitializers(),i}function yw(t,e=null,n=null,r,i=new Set){const o=[n||se,LF(t)];return r=r||("object"==typeof t?void 0:Ke(t)),new Io(o,e||Jc(),r||null,i)}let yn=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=$s;static#t=this.NULL=new pp;static create(n,r){if(Array.isArray(n))return _w({name:""},r,n,"");{const i=n.name??"";return _w({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=de({token:t,providedIn:"any",factory:()=>te(XD)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function Np(t){return t.ngOriginalError}class nr{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Np(e);for(;n&&Np(n);)n=Np(n);return n||null}}function Op(t){return e=>{setTimeout(t,void 0,e)}}const yt=class _k extends cc{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=Op(o),i&&(i=Op(i)),s&&(s=Op(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof Cn&&e.add(a),a}};function Ew(...t){}class Fe{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yt(!1),this.onMicrotaskEmpty=new yt(!1),this.onStable=new yt(!1),this.onError=new yt(!1),typeof Zone>"u")throw new b(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function yk(){const t="function"==typeof Ee.requestAnimationFrame;let e=Ee[t?"requestAnimationFrame":"setTimeout"],n=Ee[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function Ik(t){const e=()=>{!function Ek(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ee,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,kp(t),t.isCheckStableRunning=!0,Fp(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),kp(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function wk(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,o,s,a);try{return Iw(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Dw(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Iw(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Dw(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,kp(t),Fp(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fe.isInAngularZone())throw new b(909,!1)}static assertNotInAngularZone(){if(Fe.isInAngularZone())throw new b(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,vk,Ew,Ew);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const vk={};function Fp(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function kp(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Iw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Dw(t){t._nesting--,Fp(t)}class Dk{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yt,this.onMicrotaskEmpty=new yt,this.onStable=new yt,this.onError=new yt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const ww=new k("",{providedIn:"root",factory:Tw});function Tw(){const t=_e(Fe);let e=!0;return _1(new At(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new At(i=>{let o;t.runOutsideAngular(()=>{o=t.onStable.subscribe(()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const s=t.onUnstable.subscribe(()=>{Fe.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(PE()))}let Lp=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=de({token:t,providedIn:"root",factory:()=>new t})}return t})();function ya(t){for(;t;){t[Q]|=64;const e=la(t);if(yf(t)&&!e)return t;t=e}return null}const Mw=new k("",{providedIn:"root",factory:()=>!1});let cl=null;function Nw(t,e){return t[e]??Fw()}function Vw(t,e){const n=Fw();n.producerNode?.length&&(t[e]=cl,n.lView=t,cl=Ow())}const Nk={...oI,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ya(t.lView)},lView:null};function Ow(){return Object.create(Nk)}function Fw(){return cl??=Ow(),cl}const z={};function ll(t){kw(re(),D(),Rt()+t,!1)}function kw(t,e,n,r){if(!r)if(3==(3&e[Q])){const o=t.preOrderCheckHooks;null!==o&&bc(e,o,n)}else{const o=t.preOrderHooks;null!==o&&Sc(e,o,0,n)}li(n)}function A(t,e=ee.Default){const n=D();return null===n?te(t,e):YI(ct(),n,j(t),e)}function dl(t,e,n,r,i,o,s,a,u,c,l){const d=e.blueprint.slice();return d[Oe]=i,d[Q]=140|r,(null!==c||t&&2048&t[Q])&&(d[Q]|=2048),CI(d),d[Se]=d[Ji]=t,d[je]=n,d[Xi]=s||t&&t[Xi],d[H]=a||t&&t[H],d[Tr]=u||t&&t[Tr]||null,d[gt]=o,d[Ys]=function BO(){return LO++}(),d[Yn]=l,d[tI]=c,d[Ue]=2==e.type?t[Ue]:d,d}function Mo(t,e,n,r,i){let o=t.data[e];if(null===o)o=function Bp(t,e,n,r,i){const o=PI(),s=Af(),u=t.data[e]=function $k(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function io(){return null!==B.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(t,e,n,r,i),function LV(){return B.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function ta(){const t=B.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Pn(o,!0),o}function va(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Lw(t,e,n,r,i){const o=Nw(e,Zs),s=Rt(),a=2&r;try{li(-1),a&&e.length>Y&&kw(t,e,Y,!1),Rn(a?2:0,i);const c=a?o:null,l=Ef(c);try{null!==c&&(c.dirty=!1),n(r,i)}finally{If(c,l)}}finally{a&&null===e[Zs]&&Vw(e,Zs),li(s),Rn(a?3:1,i)}}function jp(t,e,n){if(_f(e)){const r=on(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{on(r)}}}function Up(t,e,n){RI()&&(function Kk(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;ui(n)&&function nL(t,e,n){const r=Ut(e,t),i=Bw(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=hl(t,dl(t,i,null,s,r,e,null,t[Xi].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Rc(n,e),_t(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const u=t.data[a],c=di(e,t,a,n);_t(c,e),null!==s&&rL(0,a-i,c,u,0,s),mn(u)&&(Kt(n.index,e)[je]=di(e,t,a,n))}}(t,e,n,Ut(n,e)),64==(64&n.flags)&&Gw(t,e,n))}function $p(t,e,n=Ut){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Bw(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Hp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Hp(t,e,n,r,i,o,s,a,u,c,l){const d=Y+r,h=d+i,f=function Fk(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:z);return n}(d,h),p="function"==typeof c?c():c;return f[P]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1,ssrId:l}}let jw=t=>null;function Uw(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const o=t[i];null===r?$w(n,e,i,o):r.hasOwnProperty(i)&&$w(n,e,r[i],o)}return n}function $w(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function Gp(t,e,n,r){if(RI()){const i=null===r?null:{"":-1},o=function Zk(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(QE(e,s.selectors,!1))if(r||(r=[]),mn(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),qp(t,e,a.length)}else r.unshift(s),qp(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&Hw(t,e,n,s,i,a),i&&function Xk(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new b(-301,!1);r.push(e[i],o)}}}(n,r,i)}n.mergedAttrs=qs(n.mergedAttrs,n.attrs)}function Hw(t,e,n,r,i,o){for(let c=0;c<r.length;c++)Lf(Rc(n,e),t,r[c].type);!function eL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let c=0;c<r.length;c++){const l=r[c];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,u=va(t,e,r.length,null);for(let c=0;c<r.length;c++){const l=r[c];n.mergedAttrs=qs(n.mergedAttrs,l.hostAttrs),tL(t,n,e,u,l),Jk(u,l,i),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function Hk(t,e,n){const i=e.directiveEnd,o=t.data,s=e.attrs,a=[];let u=null,c=null;for(let l=e.directiveStart;l<i;l++){const d=o[l],h=n?n.get(d):null,p=h?h.outputs:null;u=Uw(d.inputs,l,u,h?h.inputs:null),c=Uw(d.outputs,l,c,p);const g=null===u||null===s||WE(e)?null:iL(u,l,s);a.push(g)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}(t,n,o)}function Gw(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function jV(){return B.lFrame.currentDirectiveIndex}();try{li(o);for(let a=r;a<i;a++){const u=t.data[a],c=e[a];Sf(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Yk(u,c)}}finally{li(-1),Sf(s)}}function Yk(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function qp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Jk(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;mn(e)&&(n[""]=t)}}function tL(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=ci(i.type)),s=new na(o,mn(i),A);t.blueprint[r]=s,n[r]=s,function Wk(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function Qk(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,va(t,n,i.hostVars,z),i)}function rL(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)qw(r,n,s[a++],s[a++],s[a++])}function qw(t,e,n,r,i){const o=on(null);try{const s=t.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{on(o)}}function iL(t,e,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function zw(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function Ww(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const s=t.data[o];Rf(n[r]),s.contentQueries(2,e[o],o)}}}function hl(t,e){return t[Qs]?t[eI][gn]=e:t[Qs]=e,t[eI]=e,e}function Wp(t,e,n){Rf(0);const r=on(null);try{e(t,n)}finally{on(r)}}function Zw(t,e){const n=t[Tr],r=n?n.get(nr,null):null;r&&r.handleError(e)}function Qp(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];qw(t.data[s],e[s],r,a,i)}}function oL(t,e){const n=Kt(e,t),r=n[P];!function sL(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Oe];null!==i&&null===n[Yn]&&(n[Yn]=Sp(i,n[Tr])),Kp(r,n,n[je])}function Kp(t,e,n){Pf(e);try{const r=t.viewQuery;null!==r&&Wp(1,r,n);const i=t.template;null!==i&&Lw(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ww(t,e),t.staticViewQueries&&Wp(2,t.viewQuery,n);const o=t.components;null!==o&&function aL(t,e){for(let n=0;n<e.length;n++)oL(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,xf()}}let Xw=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const o=typeof Zone>"u"?null:Zone.current,s=function pV(t,e,n){const r=Object.create(gV);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>cI(r),run:()=>{if(r.dirty=!1,r.hasRun&&!lI(r))return;r.hasRun=!0;const s=Ef(r);try{r.cleanupFn(),r.cleanupFn=yI,r.fn(i)}finally{If(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(n,c=>{this.all.has(c)&&this.queue.set(c,o)},i);let a;this.all.add(s),s.notify();const u=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=de({token:t,providedIn:"root",factory:()=>new t})}return t})();function fl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=ef(i,a):2==o&&(r=ef(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Ea(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];null!==o&&r.push(Ie(o)),St(o)&&Jw(o,r);const s=n.type;if(8&s)Ea(t,e,n.child,r);else if(32&s){const a=Jf(n,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=OD(e,n);if(Array.isArray(a))r.push(...a);else{const u=la(e[Ue]);Ea(u[P],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Jw(t,e){for(let n=at;n<t.length;n++){const r=t[n],i=r[P].firstChild;null!==i&&Ea(r[P],r,i,e)}t[Mn]!==t[Oe]&&e.push(t[Mn])}function pl(t,e,n,r=!0){const i=e[Xi],o=i.rendererFactory,s=i.afterRenderEventManager;o.begin?.(),s?.begin();try{eT(t,e,t.template,n)}catch(u){throw r&&Zw(e,u),u}finally{o.end?.(),i.effectManager?.flush(),s?.end()}}function eT(t,e,n,r){const i=e[Q];if(256!=(256&i)){e[Xi].effectManager?.flush(),Pf(e);try{CI(e),function NI(t){return B.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Lw(t,e,n,2,r);const s=3==(3&i);if(s){const c=t.preOrderCheckHooks;null!==c&&bc(e,c,null)}else{const c=t.preOrderHooks;null!==c&&Sc(e,c,0,null),Nf(e,0)}if(function lL(t){for(let e=wD(t);null!==e;e=TD(e)){if(!e[nI])continue;const n=e[to];for(let r=0;r<n.length;r++){CV(n[r])}}}(e),tT(e,2),null!==t.contentQueries&&Ww(t,e),s){const c=t.contentCheckHooks;null!==c&&bc(e,c)}else{const c=t.contentHooks;null!==c&&Sc(e,c,1),Nf(e,1)}!function Ok(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=Nw(e,Xs);try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)li(~o);else{const s=o,a=n[++i],u=n[++i];BV(a,s),r.dirty=!1;const c=Ef(r);try{u(2,e[s])}finally{If(r,c)}}}}finally{null===e[Xs]&&Vw(e,Xs),li(-1)}}(t,e);const a=t.components;null!==a&&rT(e,a,0);const u=t.viewQuery;if(null!==u&&Wp(2,u,r),s){const c=t.viewCheckHooks;null!==c&&bc(e,c)}else{const c=t.viewHooks;null!==c&&Sc(e,c,2),Nf(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Q]&=-73,AI(e)}finally{xf()}}}function tT(t,e){for(let n=wD(t);null!==n;n=TD(n))for(let r=at;r<n.length;r++)nT(n[r],e)}function dL(t,e,n){nT(Kt(e,t),n)}function nT(t,e){if(!function wV(t){return 128==(128&t[Q])}(t))return;const n=t[P],r=t[Q];if(80&r&&0===e||1024&r||2===e)eT(n,t,n.template,t[je]);else if(t[Ws]>0){tT(t,1);const i=n.components;null!==i&&rT(t,i,1)}}function rT(t,e,n){for(let r=0;r<e.length;r++)dL(t,e[r],n)}class Ia{get rootNodes(){const e=this._lView,n=e[P];return Ea(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[je]}set context(e){this._lView[je]=e}get destroyed(){return 256==(256&this._lView[Q])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Se];if(St(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Hc(e,r),Nc(n,r))}this._attachedToViewContainer=!1}tp(this._lView[P],this._lView)}onDestroy(e){!function SI(t,e){if(256==(256&t[Q]))throw new b(911,!1);null===t[Cr]&&(t[Cr]=[]),t[Cr].push(e)}(this._lView,e)}markForCheck(){ya(this._cdRefInjectingView||this._lView)}detach(){this._lView[Q]&=-129}reattach(){this._lView[Q]|=128}detectChanges(){pl(this._lView[P],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new b(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function JO(t,e){ha(t,e,e[H],2,null,null)}(this._lView[P],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new b(902,!1);this._appRef=e}}class hL extends Ia{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;pl(e[P],e,e[je],!1)}checkNoChanges(){}get context(){return null}}class iT extends sl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=ne(e);return new Da(n,this.ngModule)}}function oT(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class pL{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=mc(r);const i=this.injector.get(e,Pp,r);return i!==Pp||n===Pp?i:this.parentInjector.get(e,n,r)}}class Da extends dw{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=oT(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return oT(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function K1(t){return t.map(Q1).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=(i=i||this.ngModule)instanceof tr?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new pL(e,o):e,a=s.get(fw,null);if(null===a)throw new b(407,!1);const d={rendererFactory:a,sanitizer:s.get(ck,null),effectManager:s.get(Xw,null),afterRenderEventManager:s.get(Lp,null)},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?function kk(t,e,n,r){const o=r.get(Mw,!1)||n===fn.ShadowDom,s=t.selectRootElement(e,o);return function Lk(t){jw(t)}(s),s}(h,r,this.componentDef.encapsulation,s):$c(h,f,function fL(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),E=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let _=null;null!==p&&(_=Sp(p,s,!0));const I=Hp(0,null,null,1,0,null,null,null,null,null,null),C=dl(null,I,null,E,null,null,d,h,s,null,_);let V,W;Pf(C);try{const ge=this.componentDef;let et,rc=null;ge.findHostDirectiveDefs?(et=[],rc=new Map,ge.findHostDirectiveDefs(ge,et,rc),et.push(ge)):et=[ge];const Bh=function mL(t,e){const n=t[P],r=Y;return t[r]=e,Mo(n,r,2,"#host",null)}(C,p),L8=function _L(t,e,n,r,i,o,s){const a=i[P];!function yL(t,e,n,r){for(const i of t)e.mergedAttrs=qs(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(fl(e,e.mergedAttrs,!0),null!==n&&BD(r,n,e))}(r,t,e,s);let u=null;null!==e&&(u=Sp(e,i[Tr]));const c=o.rendererFactory.createRenderer(e,n);let l=16;n.signals?l=4096:n.onPush&&(l=64);const d=dl(i,Bw(n),null,l,i[t.index],t,o,c,null,null,u);return a.firstCreatePass&&qp(a,t,r.length-1),hl(i,d),i[t.index]=d}(Bh,p,ge,et,C,d,h);W=TI(I,Y),p&&function EL(t,e,n,r){if(r)gf(t,n,["ng-version",lk.full]);else{const{attrs:i,classes:o}=function Y1(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!pn(i))break;i=o}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&gf(t,n,i),o&&o.length>0&&LD(t,n,o.join(" "))}}(h,ge,p,r),void 0!==n&&function IL(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(W,this.ngContentSelectors,n),V=function vL(t,e,n,r,i,o){const s=ct(),a=i[P],u=Ut(s,i);Hw(a,i,s,n,null,r);for(let l=0;l<n.length;l++)_t(di(i,a,s.directiveStart+l,s),i);Gw(a,i,s),u&&_t(u,i);const c=di(i,a,s.directiveStart+s.componentOffset,s);if(t[je]=i[je]=c,null!==o)for(const l of o)l(c,e);return jp(a,s,t),c}(L8,ge,et,rc,C,[DL]),Kp(I,C,null)}finally{xf()}return new gL(this.componentType,V,Ao(W,C),C,W)}}class gL extends rk{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new hL(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;Qp(o[P],o,i,e,n),this.previousInputValues.set(e,n),ya(Kt(this._tNode.index,o))}}get injector(){return new Pt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function DL(){const t=ct();Ac(D()[P],t)}function he(t){let e=function sT(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(mn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new b(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=gl(t.inputs),s.inputTransforms=gl(t.inputTransforms),s.declaredInputs=gl(t.declaredInputs),s.outputs=gl(t.outputs);const a=i.hostBindings;a&&AL(t,a);const u=i.viewQuery,c=i.contentQueries;if(u&&TL(t,u),c&&CL(t,c),lc(t.inputs,i.inputs),lc(t.declaredInputs,i.declaredInputs),lc(t.outputs,i.outputs),null!==i.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),lc(s.inputTransforms,i.inputTransforms)),mn(i)&&i.data.animation){const l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===he&&(n=!1)}}e=Object.getPrototypeOf(e)}!function wL(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=qs(i.hostAttrs,n=qs(n,i.hostAttrs))}}(r)}function gl(t){return t===bn?{}:t===se?[]:t}function TL(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function CL(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function AL(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function ml(t){return!!function Yp(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function vt(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}let wT=function TT(t,e,n,r){return Sr(!0),e[H].createComment("")};function Il(t,e,n){const r=D();return vt(r,oo(),e)&&function Zt(t,e,n,r,i,o,s,a){const u=Ut(e,n);let l,c=e.inputs;!a&&null!=c&&(l=c[r])?(Qp(t,n,l,r,i),ui(e)&&function qk(t,e){const n=Kt(e,t);16&n[Q]||(n[Q]|=64)}(n,e.index)):3&e.type&&(r=function Gk(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}(re(),function Ne(){const t=B.lFrame;return TI(t.tView,t.selectedIndex)}(),r,t,e,r[H],n,!1),Il}function ng(t,e,n,r,i){const s=i?"class":"style";Qp(t,n,e.inputs[s],s,r)}function Pr(t,e,n,r){const i=D(),o=re(),s=Y+t,a=i[H],u=o.firstCreatePass?function r2(t,e,n,r,i,o){const s=e.consts,u=Mo(e,t,2,r,br(s,i));return Gp(e,n,u,br(s,o)),null!==u.attrs&&fl(u,u.attrs,!1),null!==u.mergedAttrs&&fl(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,e,n,r):o.data[s],c=CT(o,i,u,a,e,t);i[s]=c;const l=Ic(u);return Pn(u,!0),BD(a,c,u),32!=(32&u.flags)&&Cc()&&qc(o,i,c,u),0===function bV(){return B.lFrame.elementDepthCount}()&&_t(c,i),function SV(){B.lFrame.elementDepthCount++}(),l&&(Up(o,i,u),jp(o,u,i)),null!==r&&$p(i,u),Pr}function mi(){let t=ct();Af()?function bf(){B.lFrame.isParent=!1}():(t=t.parent,Pn(t,!1));const e=t;(function RV(t){return B.skipHydrationRootTNode===t})(e)&&function VV(){B.skipHydrationRootTNode=null}(),function MV(){B.lFrame.elementDepthCount--}();const n=re();return n.firstCreatePass&&(Ac(n,t),_f(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function ZV(t){return 0!=(8&t.flags)}(e)&&ng(n,e,D(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function XV(t){return 0!=(16&t.flags)}(e)&&ng(n,e,D(),e.stylesWithoutHost,!1),mi}function rg(t,e,n,r){return Pr(t,e,n,r),mi(),rg}let CT=(t,e,n,r,i,o)=>(Sr(!0),$c(r,i,function UI(){return B.lFrame.currentNamespace}()));function Dl(t){return!!t&&"function"==typeof t.then}function ST(t){return!!t&&"function"==typeof t.subscribe}function un(t,e,n,r){const i=D(),o=re(),s=ct();return function RT(t,e,n,r,i,o,s){const a=Ic(r),c=t.firstCreatePass&&function Kw(t){return t.cleanup||(t.cleanup=[])}(t),l=e[je],d=function Qw(t){return t[Zi]||(t[Zi]=[])}(e);let h=!0;if(3&r.type||s){const g=Ut(r,e),m=s?s(g):g,E=d.length,_=s?C=>s(Ie(C[r.index])):r.index;let I=null;if(!s&&a&&(I=function l2(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[Zi],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==I)(I.__ngLastListenerFn__||I).__ngNextListenerFn__=o,I.__ngLastListenerFn__=o,h=!1;else{o=xT(r,e,l,o,!1);const C=n.listen(m,i,o);d.push(o,C),c&&c.push(i,_,E,E+1)}}else o=xT(r,e,l,o,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const V=e[p[m]][p[m+1]].subscribe(o),W=d.length;d.push(o,V),c&&c.push(i,r.index,W,-(W+1))}}}(o,i,i[H],s,t,e,r),un}function PT(t,e,n,r){try{return Rn(6,e,n),!1!==n(r)}catch(i){return Zw(t,i),!1}finally{Rn(7,e,n)}}function xT(t,e,n,r,i){return function o(s){if(s===Function)return r;ya(t.componentOffset>-1?Kt(t.index,e):e);let u=PT(e,n,r,s),c=o.__ngNextListenerFn__;for(;c;)u=PT(e,n,c,s)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function wl(t,e){return t<<17|e<<2}function xr(t){return t>>17&32767}function ag(t){return 2|t}function _i(t){return(131068&t)>>2}function ug(t,e){return-131069&t|e<<2}function cg(t){return 1|t}function $T(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?xr(o):_i(o),u=!1;for(;0!==a&&(!1===u||s);){const l=t[a+1];E2(t[a],e)&&(u=!0,t[a+1]=r?cg(l):ag(l)),a=r?xr(l):_i(l)}u&&(t[n+1]=r?ag(o):cg(o))}function E2(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&po(t,e)>=0}function Tl(t,e){return function vn(t,e,n,r){const i=D(),o=re(),s=function Jn(t){const e=B.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);o.firstUpdatePass&&function ZT(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Rt()],s=function YT(t,e){return e>=t.expandoStartIndex}(t,n);(function tC(t,e){return 0!=(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function M2(t,e,n,r){const i=function Mf(t){const e=B.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=ba(n=lg(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=lg(i,t,e,n,r),null===o){let u=function R2(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==_i(r))return t[xr(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=lg(null,t,e,u[1],r),u=ba(u,e.attrs,r),function P2(t,e,n,r){t[xr(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else o=function x2(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=ba(r,t[o].hostAttrs,n);return ba(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function y2(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=xr(s),u=_i(s);t[r]=n;let l,c=!1;if(Array.isArray(n)?(l=n[1],(null===l||po(n,l)>0)&&(c=!0)):l=n,i)if(0!==u){const h=xr(t[a+1]);t[r+1]=wl(h,a),0!==h&&(t[h+1]=ug(t[h+1],r)),t[a+1]=function m2(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=wl(a,0),0!==a&&(t[a+1]=ug(t[a+1],r)),a=r;else t[r+1]=wl(u,0),0===a?a=r:t[u+1]=ug(t[u+1],r),u=r;c&&(t[r+1]=ag(t[r+1])),$T(t,l,r,!0),$T(t,l,r,!1),function v2(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&po(o,e)>=0&&(n[r+1]=cg(n[r+1]))}(e,l,t,r,o),s=wl(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==z&&vt(i,s,e)&&function JT(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1],l=function _2(t){return 1==(1&t)}(c)?eC(u,e,n,i,_i(c),s):void 0;Cl(l)||(Cl(o)||function g2(t){return 2==(2&t)}(c)&&(o=eC(u,null,n,i,a,s)),function cF(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Mr.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Mr.Important),t.setStyle(n,r,i,o))}}(r,s,Tc(Rt(),n),i,o))}(o,o.data[Rt()],i,i[H],t,i[s+1]=function F2(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Ke(function Rr(t){return t instanceof HD?t.changingThisBreaksApplicationSecurity:t}(t)))),t}(e,n),r,s)}(t,e,null,!0),Tl}function lg(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=ba(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ba(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Yt(t,s,!!n||e[++o]))}return void 0===t?null:t}function eC(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const u=t[i],c=Array.isArray(u),l=c?u[1]:u,d=null===l;let h=n[i+1];h===z&&(h=d?se:void 0);let f=d?$f(h,r):l===r?h:void 0;if(c&&!Cl(f)&&(f=$f(u,r)),Cl(f)&&(a=f,s))return a;const p=t[i+1];i=s?xr(p):_i(p)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=$f(u,r))}return a}function Cl(t){return void 0!==t}function Al(t,e=""){const n=D(),r=re(),i=t+Y,o=r.firstCreatePass?Mo(r,i,1,e,null):r.data[i],s=nC(r,n,o,e,t);n[i]=s,Cc()&&qc(r,n,s,o),Pn(o,!1)}let nC=(t,e,n,r,i)=>(Sr(!0),function Uc(t,e){return t.createText(e)}(e[H],r));function dg(t){return hg("",t,""),dg}function hg(t,e,n){const r=D(),i=function Po(t,e,n,r){return vt(t,oo(),n)?e+$(n)+r:z}(r,t,e,n);return i!==z&&function ir(t,e,n){const r=Tc(e,t);!function AD(t,e,n){t.setValue(e,n)}(t[H],r,n)}(r,Rt(),i),hg}const Uo="en-US";let TC=Uo;function gg(t,e,n,r,i){if(t=j(t),Array.isArray(t))for(let o=0;o<t.length;o++)gg(t[o],e,n,r,i);else{const o=re(),s=D(),a=ct();let u=fi(t)?t:j(t.provide);const c=ow(t),l=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(fi(t)||!t.multi){const f=new na(c,i,A),p=_g(u,e,i?l:l+h,d);-1===p?(Lf(Rc(a,s),o,u),mg(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[p]=f,s[p]=f)}else{const f=_g(u,e,l+h,d),p=_g(u,e,l,l+h),m=p>=0&&n[p];if(i&&!m||!i&&!(f>=0&&n[f])){Lf(Rc(a,s),o,u);const E=function rj(t,e,n,r,i){const o=new na(t,n,A);return o.multi=[],o.index=e,o.componentProviders=0,KC(o,i,r&&!n),o}(i?nj:tj,n.length,i,r,c);!i&&m&&(n[p].providerFactory=E),mg(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(E),s.push(E)}else mg(o,t,f>-1?f:p,KC(n[i?p:f],c,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function mg(t,e,n,r){const i=fi(e),o=function jF(t){return!!t.useClass}(e);if(i||o){const u=(o?j(e.useClass):e).prototype.ngOnDestroy;if(u){const c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const l=c.indexOf(n);-1===l?c.push(n,[r,u]):c[l+1].push(r,u)}else c.push(n,u)}}}function KC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function _g(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function tj(t,e,n,r){return yg(this.multi,[])}function nj(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=di(n,n[P],this.providerFactory.index,r);o=a.slice(0,s),yg(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],yg(i,o);return o}function yg(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Me(t,e=[]){return n=>{n.providersResolver=(r,i)=>function ej(t,e,n){const r=re();if(r.firstCreatePass){const i=mn(t);gg(n,r.data,r.blueprint,i,!0),gg(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class vi{}class ij{}class vg extends vi{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new iT(this);const i=function Qt(t,e){const n=t[jE]||null;if(!n&&!0===e)throw new Error(`Type ${Ke(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function rr(t){return t instanceof Function?t():t}(i.bootstrap),this._r3Injector=yw(e,n,[{provide:vi,useValue:this},{provide:sl,useValue:this.componentFactoryResolver},...r],Ke(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Eg extends ij{constructor(e){super(),this.moduleType=e}create(e){return new vg(this.moduleType,e,[])}}function kj(t,e,n,r=!0){const i=e[P];if(function tF(t,e,n,r){const i=at+r,o=n.length;r>0&&(n[i-1][gn]=e),r<o-at?(e[gn]=n[i],nD(n,at+r,e)):(n.push(e),e[gn]=null),e[Se]=n;const s=e[Ks];null!==s&&n!==s&&function nF(t,e){const n=t[to];e[Ue]!==e[Se][Se][Ue]&&(t[nI]=!0),null===n?t[to]=[e]:n.push(e)}(s,e);const a=e[Sn];null!==a&&a.insertView(t),e[Q]|=128}(i,e,t,n),r){const o=op(n,t),s=e[H],a=Gc(s,t[Mn]);null!==a&&function XO(t,e,n,r,i,o){r[Oe]=i,r[gt]=e,ha(t,r,n,1,i,o)}(i,t[gt],s,e,a,o)}}Symbol;let sr=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=jj}return t})();const Lj=sr,Bj=class extends Lj{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function Fj(t,e,n,r){const i=e.tView,a=dl(t,i,n,4096&t[Q]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Ks]=t[e.index];const c=t[Sn];return null!==c&&(a[Sn]=c.createEmbeddedView(i)),Kp(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new Ia(i)}};function jj(){return function Pl(t,e){return 4&t.type?new Bj(e,t,Ao(t,e)):null}(ct(),D())}let kn=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=zj}return t})();function zj(){return function pA(t,e){let n;const r=e[t.index];return St(r)?n=r:(n=zw(r,e,null,t),e[t.index]=n,hl(e,n)),gA(n,e,t,r),new hA(n,t,e)}(ct(),D())}const Wj=kn,hA=class extends Wj{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ao(this._hostTNode,this._hostLView)}get injector(){return new Pt(this._hostTNode,this._hostLView)}get parentInjector(){const e=Pc(this._hostTNode,this._hostLView);if(Of(e)){const n=ia(e,this._hostLView),r=ra(e);return new Pt(n[P].data[r+8],n)}return new Pt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=fA(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-at}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,o){const s=e&&!function sa(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}const u=s?e:new Da(ne(e)),c=r||this.parentInjector;if(!o&&null==u.ngModule){const m=(s?c:this.parentInjector).get(tr,null);m&&(o=m)}ne(u.componentType??{});const f=u.create(c,i,null,o);return this.insertImpl(f.hostView,a,false),f}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function TV(t){return St(t[Se])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const c=i[Se],l=new hA(c,c[gt],c[Se]);l.detach(l.indexOf(e))}}const s=this._adjustIndex(n),a=this._lContainer;return kj(a,i,s,!r),e.attachToViewContainerRef(),nD(wg(a),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=fA(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Hc(this._lContainer,n);r&&(Nc(wg(this._lContainer),n),tp(r[P],r))}detach(e){const n=this._adjustIndex(e,-1),r=Hc(this._lContainer,n);return r&&null!=Nc(wg(this._lContainer),n)?new Ia(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function fA(t){return t[8]}function wg(t){return t[8]||(t[8]=[])}let gA=function mA(t,e,n,r){if(t[Mn])return;let i;i=8&n.type?Ie(r):function Qj(t,e){const n=t[H],r=n.createComment(""),i=Ut(e,t);return hi(n,Gc(n,i),r,function sF(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Mn]=i};const SU=new k("Application Initializer");let Ng=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=_e(SU,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(Dl(o))n.push(o);else if(ST(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ar=new k("LocaleId",{providedIn:"root",factory:()=>_e(ar,ee.Optional|ee.SkipSelf)||function RU(){return typeof $localize<"u"&&$localize.locale||Uo}()});let NU=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new y1(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const $A=new k(""),Ol=new k("");let Lg,Fg=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Lg||(function n$(t){Lg=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(te(Fe),te(kg),te(Ol))};static#t=this.\u0275prov=de({token:t,factory:t.\u0275fac})}return t})(),kg=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Lg?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Nr=null;const HA=new k("AllowMultipleToken"),Bg=new k("PlatformDestroyListeners"),GA=new k("appBootstrapListener");function WA(t,e,n=[]){const r=`Platform: ${e}`,i=new k(r);return(o=[])=>{let s=jg();if(!s||s.injector.get(HA,!1)){const a=[...n,...o,{provide:i,useValue:!0}];t?t(a):function o$(t){if(Nr&&!Nr.get(HA,!1))throw new b(400,!1);(function qA(){!function cV(t){pI=t}(()=>{throw new b(600,!1)})})(),Nr=t;const e=t.get(KA);(function zA(t){t.get(sw,null)?.forEach(n=>n())})(t)}(function QA(t=[],e){return yn.create({name:e,providers:[{provide:_p,useValue:"platform"},{provide:Bg,useValue:new Set([()=>Nr=null])},...t]})}(a,r))}return function a$(t){const e=jg();if(!e)throw new b(401,!1);return e}()}}function jg(){return Nr?.get(KA)??null}let KA=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function u$(t="zone.js",e){return"noop"===t?new Dk:"zone.js"===t?new Fe(e):t}(r?.ngZone,function YA(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function sj(t,e,n){return new vg(t,e,n)}(n.moduleType,this.injector,function t0(t){return[{provide:Fe,useFactory:t},{provide:Yc,multi:!0,useFactory:()=>{const e=_e(l$,{optional:!0});return()=>e.initialize()}},{provide:e0,useFactory:c$},{provide:ww,useFactory:Tw}]}(()=>i)),s=o.injector.get(nr,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{Fl(this._modules,o),a.unsubscribe()})}),function ZA(t,e,n){try{const r=n();return Dl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(Ng);return a.runInitializers(),a.donePromise.then(()=>(function CC(t){rn(t,"Expected localeId to be defined"),"string"==typeof t&&(TC=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(ar,Uo)||Uo),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=XA({},r);return function r$(t,e,n){const r=new Eg(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(ka);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new b(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new b(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Bg,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(te(yn))};static#t=this.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function XA(t,e){return Array.isArray(e)?e.reduce(XA,t):{...t,...e}}let ka=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_e(e0),this.zoneIsStable=_e(ww),this.componentTypes=[],this.components=[],this.isStable=_e(NU).hasPendingTasks.pipe(function E1(t,e){return si((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(vr(r,u=>{i?.unsubscribe();let c=0;const l=o++;An(t(u,l)).subscribe(i=vr(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}(n=>n?function v1(...t){return Xh(t,bE(t))}(!1):this.zoneIsStable),function I1(t,e=qh){return t=t??D1,si((n,r)=>{let i,o=!0;n.subscribe(vr(r,s=>{const a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}(),PE()),this._injector=_e(tr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof dw;if(!this._injector.get(Ng).done)throw!i&&function zs(t){const e=ne(t)||st(t)||bt(t);return null!==e&&e.standalone}(n),new b(405,!1);let s;s=i?n:this._injector.get(sl).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function i$(t){return t.isBoundToModule}(s)?void 0:this._injector.get(vi),c=s.create(yn.NULL,[],r||s.selector,a),l=c.location.nativeElement,d=c.injector.get($A,null);return d?.registerApplication(l),c.onDestroy(()=>{this.detachView(c.hostView),Fl(this.components,c),d?.unregisterApplication(l)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new b(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Fl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(GA,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Fl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new b(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Fl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const e0=new k("",{providedIn:"root",factory:()=>_e(nr).handleError.bind(void 0)});function c$(){const t=_e(Fe),e=_e(nr);return n=>t.runOutsideAngular(()=>e.handleError(n))}let l$=(()=>{class t{constructor(){this.zone=_e(Fe),this.applicationRef=_e(ka)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class a0{constructor(){}supports(e){return ml(e)}create(e){return new v$(e)}}const y$=(t,e)=>e;class v${constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||y$}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<c0(r,i,o)?n:r,a=c0(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){const f=h<o.length?o[h]:o[h]=0,p=f+h;l<=p&&p<c&&(o[h]=f+1)}o[s.previousIndex]=l-c}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!ml(e))throw new b(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function VL(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new E$(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new u0),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new u0),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class E${constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class I${constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class u0{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new I$,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function c0(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function d0(){return new Bl([new a0])}let Bl=(()=>{class t{static#e=this.\u0275prov=de({token:t,providedIn:"root",factory:d0});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||d0()),deps:[[t,new qf,new Gf]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new b(901,!1)}}return t})();const A$=WA(null,"core",[]);let b$=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(te(ka))};static#t=this.\u0275mod=wr({type:t});static#n=this.\u0275inj=Wn({})}return t})(),Wg=null;function Ba(){return Wg}class j${}const Ii=new k("DocumentToken");class MH{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let P0=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new MH(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),x0(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{x0(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(A(kn),A(sr),A(Bl))};static#t=this.\u0275dir=q({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function x0(t,e){t.context.$implicit=e.item}let n4=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=wr({type:t});static#n=this.\u0275inj=Wn({})}return t})();function k0(t){return"server"===t}class R4 extends j${constructor(){super(...arguments),this.supportsDOMEvents=!0}}class lm extends R4{static makeCurrent(){!function B$(t){Wg||(Wg=t)}(new lm)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function P4(){return Ha=Ha||document.querySelector("base"),Ha?Ha.getAttribute("href"):null}();return null==n?null:function x4(t){Jl=Jl||document.createElement("a"),Jl.setAttribute("href",t);const e=Jl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Ha=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function AH(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Jl,Ha=null,V4=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=de({token:t,factory:t.\u0275fac})}return t})();const dm=new k("EventManagerPlugins");let $0=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new b(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(te(dm),te(Fe))};static#t=this.\u0275prov=de({token:t,factory:t.\u0275fac})}return t})();class H0{constructor(e){this._doc=e}}const hm="ng-app-id";let G0=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=k0(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${hm}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(hm),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(hm,this.appId),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(te(Ii),te(el),te(aw,8),te(wo))};static#t=this.\u0275prov=de({token:t,factory:t.\u0275fac})}return t})();const fm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pm=/%COMP%/g,L4=new k("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function z0(t,e){return e.map(n=>n.replace(pm,t))}let W0=(()=>{class t{constructor(n,r,i,o,s,a,u,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=k0(a),this.defaultRenderer=new gm(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===fn.ShadowDom&&(r={...r,encapsulation:fn.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof K0?i.applyToHost(n):i instanceof mm&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case fn.Emulated:o=new K0(u,c,r,this.appId,l,s,a,d);break;case fn.ShadowDom:return new $4(u,c,n,r,s,a,this.nonce,d);default:o=new mm(u,c,r,l,s,a,d)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(te($0),te(G0),te(el),te(L4),te(Ii),te(wo),te(Fe),te(aw))};static#t=this.\u0275prov=de({token:t,factory:t.\u0275fac})}return t})();class gm{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(fm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Q0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Q0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new b(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=fm[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=fm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Mr.DashCase|Mr.Important)?e.style.setProperty(n,r,i&Mr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Mr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=Ba().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function Q0(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class $4 extends gm{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=z0(i.id,i.styles);for(const l of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class mm extends gm{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?z0(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class K0 extends mm{constructor(e,n,r,i,o,s,a,u){const c=i+"-"+r.id;super(e,n,r,o,s,a,u,c),this.contentAttr=function B4(t){return"_ngcontent-%COMP%".replace(pm,t)}(c),this.hostAttr=function j4(t){return"_nghost-%COMP%".replace(pm,t)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let H4=(()=>{class t extends H0{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(te(Ii))};static#t=this.\u0275prov=de({token:t,factory:t.\u0275fac})}return t})();const Y0=["alt","control","meta","shift"],G4={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},q4={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let z4=(()=>{class t extends H0{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ba().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Y0.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),s+=c+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=G4[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Y0.forEach(s=>{s!==i&&(0,q4[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(te(Ii))};static#t=this.\u0275prov=de({token:t,factory:t.\u0275fac})}return t})();const X0=[{provide:wo,useValue:"browser"},{provide:sw,useValue:function W4(){lm.makeCurrent()},multi:!0},{provide:Ii,useFactory:function K4(){return function pF(t){up=t}(document),document},deps:[]}],Y4=WA(A$,"browser",X0),Z4=new k(""),J0=[{provide:Ol,useClass:class N4{addToWindow(e){Ee.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new b(5103,!1);return o},Ee.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ee.getAllAngularRootElements=()=>e.getAllRootElements(),Ee.frameworkStabilizers||(Ee.frameworkStabilizers=[]),Ee.frameworkStabilizers.push(r=>{const i=Ee.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Ba().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:$A,useClass:Fg,deps:[Fe,kg,Ol]},{provide:Fg,useClass:Fg,deps:[Fe,kg,Ol]}],eb=[{provide:_p,useValue:"root"},{provide:nr,useFactory:function Q4(){return new nr},deps:[]},{provide:dm,useClass:H4,multi:!0,deps:[Ii,Fe,wo]},{provide:dm,useClass:z4,multi:!0,deps:[Ii]},W0,G0,$0,{provide:fw,useExisting:W0},{provide:class a4{},useClass:V4,deps:[]},[]];let X4=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:el,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(te(Z4,12))};static#t=this.\u0275mod=wr({type:t});static#n=this.\u0275inj=Wn({providers:[...eb,...J0],imports:[n4,b$]})}return t})();typeof window<"u"&&window;const{isArray:oG}=Array,{getPrototypeOf:sG,prototype:aG,keys:uG}=Object;const{isArray:dG}=Array;function pG(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function gG(...t){const e=function c1(t){return xe(Zh(t))?t.pop():void 0}(t),{args:n,keys:r}=function cG(t){if(1===t.length){const e=t[0];if(oG(e))return{args:e,keys:null};if(function lG(t){return t&&"object"==typeof t&&sG(t)===aG}(e)){const n=uG(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t),i=new At(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let u=s,c=s;for(let l=0;l<s;l++){let d=!1;An(n[l]).subscribe(vr(o,h=>{d||(d=!0,c--),a[l]=h},()=>u--,void 0,()=>{(!u||!d)&&(c||o.next(r?pG(r,a):a),o.complete())}))}});return e?i.pipe(function fG(t){return zh(e=>function hG(t,e){return dG(e)?t(...e):t(e)}(t,e))}(e)):i}let ib=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(A(pi),A(_n))};static#t=this.\u0275dir=q({type:t})}return t})(),Di=(()=>{class t extends ib{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=function mt(t){return Qn(()=>{const e=t.prototype.constructor,n=e[Kn]||Bf(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[Kn]||Bf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}(t)))(i||t)}}();static#t=this.\u0275dir=q({type:t,features:[he]})}return t})();const Ln=new k("NgValueAccessor"),_G={provide:Ln,useExisting:ve(()=>ed),multi:!0},vG=new k("CompositionEventMode");let ed=(()=>{class t extends ib{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function yG(){const t=Ba()?Ba().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(A(pi),A(_n),A(vG,8))};static#t=this.\u0275dir=q({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&un("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Me([_G]),he]})}return t})();function Or(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function sb(t){return null!=t&&"number"==typeof t.length}const Et=new k("NgValidators"),Fr=new k("NgAsyncValidators"),EG=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class IG{static min(e){return function ab(t){return e=>{if(Or(e.value)||Or(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(e)}static max(e){return function ub(t){return e=>{if(Or(e.value)||Or(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(e)}static required(e){return function cb(t){return Or(t.value)?{required:!0}:null}(e)}static requiredTrue(e){return function lb(t){return!0===t.value?null:{required:!0}}(e)}static email(e){return function db(t){return Or(t.value)||EG.test(t.value)?null:{email:!0}}(e)}static minLength(e){return function hb(t){return e=>Or(e.value)||!sb(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function fb(t){return e=>sb(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static pattern(e){return function pb(t){if(!t)return td;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Or(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Eb(e)}static composeAsync(e){return Ib(e)}}function td(t){return null}function gb(t){return null!=t}function mb(t){return Dl(t)?Xh(t):t}function _b(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function yb(t,e){return e.map(n=>n(t))}function vb(t){return t.map(e=>function DG(t){return!t.validate}(e)?e:n=>e.validate(n))}function Eb(t){if(!t)return null;const e=t.filter(gb);return 0==e.length?null:function(n){return _b(yb(n,e))}}function ym(t){return null!=t?Eb(vb(t)):null}function Ib(t){if(!t)return null;const e=t.filter(gb);return 0==e.length?null:function(n){return gG(yb(n,e).map(mb)).pipe(zh(_b))}}function vm(t){return null!=t?Ib(vb(t)):null}function Db(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function wb(t){return t._rawValidators}function Tb(t){return t._rawAsyncValidators}function Em(t){return t?Array.isArray(t)?t:[t]:[]}function nd(t,e){return Array.isArray(t)?t.includes(e):t===e}function Cb(t,e){const n=Em(e);return Em(t).forEach(i=>{nd(n,i)||n.push(i)}),n}function Ab(t,e){return Em(e).filter(n=>!nd(t,n))}class bb{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ym(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Ot extends bb{get formDirective(){return null}get path(){return null}}class kr extends bb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Sb{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Mb=(()=>{class t extends Sb{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(A(kr,2))};static#t=this.\u0275dir=q({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Tl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[he]})}return t})(),Rb=(()=>{class t extends Sb{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(A(Ot,10))};static#t=this.\u0275dir=q({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Tl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[he]})}return t})();const Ga="VALID",id="INVALID",qo="PENDING",qa="DISABLED";function wm(t){return(od(t)?t.validators:t)||null}function Tm(t,e){return(od(e)?e.asyncValidators:t)||null}function od(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function xb(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new b(1e3,"");if(!r[n])throw new b(1001,"")}function Nb(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new b(1002,"")})}class sd{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ga}get invalid(){return this.status===id}get pending(){return this.status==qo}get disabled(){return this.status===qa}get enabled(){return this.status!==qa}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Cb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Cb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ab(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ab(e,this._rawAsyncValidators))}hasValidator(e){return nd(this._rawValidators,e)}hasAsyncValidator(e){return nd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=qo,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=qa,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Ga,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ga||this.status===qo)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qa:Ga}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=qo,this._hasOwnPendingAsyncValidator=!0;const n=mb(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new yt,this.statusChanges=new yt}_calculateStatus(){return this._allControlsDisabled()?qa:this.errors?id:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qo)?qo:this._anyControlsHaveStatus(id)?id:Ga}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){od(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function AG(t){return Array.isArray(t)?ym(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function bG(t){return Array.isArray(t)?vm(t):t||null}(this._rawAsyncValidators)}}class za extends sd{constructor(e,n,r){super(wm(n),Tm(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Nb(this,0,e),Object.keys(e).forEach(r=>{xb(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Vb extends za{}const zo=new k("CallSetDisabledState",{providedIn:"root",factory:()=>ad}),ad="always";function Wa(t,e,n=ad){Cm(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function MG(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Ob(t,e)})}(t,e),function PG(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function RG(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Ob(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function SG(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function cd(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),dd(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function ld(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Cm(t,e){const n=wb(t);null!==e.validator?t.setValidators(Db(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=Tb(t);null!==e.asyncValidator?t.setAsyncValidators(Db(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();ld(e._rawValidators,i),ld(e._rawAsyncValidators,i)}function dd(t,e){let n=!1;if(null!==t){if(null!==e.validator){const i=wb(t);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(null!==e.asyncValidator){const i=Tb(t);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}const r=()=>{};return ld(e._rawValidators,r),ld(e._rawAsyncValidators,r),n}function Ob(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Lb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Bb(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const Ka=class extends sd{constructor(e=null,n,r){super(wm(n),Tm(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),od(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=Bb(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Lb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Lb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Bb(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Gb=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=q({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})(),zb=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=wr({type:t});static#n=this.\u0275inj=Wn({})}return t})();const Rm=new k("NgModelWithFormControlWarning"),qG={provide:Ot,useExisting:ve(()=>hd)};let hd=(()=>{class t extends Ot{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new yt,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(dd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const r=this.form.get(n.path);return Wa(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){cd(n.control||null,n,!1),function OG(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this.submitted=!0,function kb(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const r=n.control,i=this.form.get(n.path);r!==i&&(cd(r||null,n),(t=>t instanceof Ka)(i)&&(Wa(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const r=this.form.get(n.path);(function Fb(t,e){Cm(t,e)})(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const r=this.form.get(n.path);r&&function xG(t,e){return dd(t,e)}(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Cm(this.form,this),this._oldForm&&dd(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||t)(A(Et,10),A(Fr,10),A(zo,8))};static#t=this.\u0275dir=q({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&un("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Me([qG]),he,Zn]})}return t})();const QG={provide:kr,useExisting:ve(()=>Nm)};let Nm=(()=>{class t extends kr{set isDisabled(n){}static#e=this._ngModelWarningSentOnce=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new yt,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Sm(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===ed?n=o:function VG(t){return Object.getPrototypeOf(t.constructor)===Di}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){this._added||this._setUpControl(),function bm(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return function ud(t,e){return[...e.path,t]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||t)(A(Ot,13),A(Et,10),A(Fr,10),A(Ln,10),A(Rm,8))};static#n=this.\u0275dir=q({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Me([QG]),he,Zn]})}return t})(),c9=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=wr({type:t});static#n=this.\u0275inj=Wn({imports:[zb]})}return t})();class uS extends sd{constructor(e,n,r){super(wm(n),Tm(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){Nb(this,0,e),e.forEach((r,i)=>{xb(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>!!r._syncPendingControls()||n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function cS(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let l9=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){const n=new t;return n.useNonNullable=!0,n}group(n,r=null){const i=this._reduceControls(n);let o={};return cS(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new za(i,o)}record(n,r=null){const i=this._reduceControls(n);return new Vb(i,r)}control(n,r,i){let o={};return this.useNonNullable?(cS(r)?o=r:(o.validators=r,o.asyncValidators=i),new Ka(n,{...o,nonNullable:!0})):new Ka(n,r,i)}array(n,r,i){const o=n.map(s=>this._createControl(s));return new uS(o,r,i)}_reduceControls(n){const r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){return n instanceof Ka||n instanceof sd?n:Array.isArray(n)?this.control(n[0],n.length>1?n[1]:null,n.length>2?n[2]:null):this.control(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),d9=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Rm,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:zo,useValue:n.callSetDisabledState??ad}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=wr({type:t});static#n=this.\u0275inj=Wn({imports:[c9]})}return t})();function lS(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function x(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(u){lS(o,r,i,s,a,"next",u)}function a(u){lS(o,r,i,s,a,"throw",u)}s(void 0)})}}const dS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},hS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;u||(f=64,s||(h=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const u=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==c||null==d)throw new g9;r.push(o<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class g9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fd=function(t){return function(t){const e=dS(t);return hS.encodeByteArray(e,!0)}(t).replace(/\./g,"")},pd=()=>{try{return function y9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&function(t){try{return hS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},pS=()=>{var t;return null===(t=pd())||void 0===t?void 0:t.config};class gS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function Lr(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function mS(){try{return"object"==typeof indexedDB}catch{return!1}}class Wo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Wo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_S.prototype.create)}}class _S{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function M9(t,e){return t.replace(R9,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new Wo(i,`${this.serviceName}: ${s} (${i}).`,r)}}const R9=/\{\$([^}]+)}/g;function Bm(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(vS(o)&&vS(s)){if(!Bm(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function vS(t){return null!==t&&"object"==typeof t}function Ti(t){return t&&t._delegate?t._delegate:t}class Ya{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ci="[DEFAULT]";class L9{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new gS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function j9(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ci})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return x(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Ci){return this.instances.has(e)}getOptions(e=Ci){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===Ci?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=Ci){return this.component?this.component.multipleInstances?e:Ci:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class U9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new L9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const $m=[];var oe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(oe||{});const ES={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},$9=oe.INFO,H9={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},G9=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=H9[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class IS{constructor(e){this.name=e,this._logLevel=$9,this._logHandler=G9,this._userLogHandler=null,$m.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ES[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const q9=(t,e)=>e.some(n=>t instanceof n);let DS,wS;const TS=new WeakMap,Hm=new WeakMap,CS=new WeakMap,Gm=new WeakMap,qm=new WeakMap;let zm={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Hm.get(t);if("objectStoreNames"===e)return t.objectStoreNames||CS.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Br(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function X9(t){return"function"==typeof t?function Z9(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function W9(){return wS||(wS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(Wm(this),e),Br(TS.get(this))}:function(...e){return Br(t.apply(Wm(this),e))}:function(e,...n){const r=t.call(Wm(this),e,...n);return CS.set(r,e.sort?e.sort():[e]),Br(r)}}(t):(t instanceof IDBTransaction&&function K9(t){if(Hm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Hm.set(t,e)}(t),q9(t,function z9(){return DS||(DS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,zm):t)}function Br(t){if(t instanceof IDBRequest)return function Q9(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Br(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&TS.set(n,t)}).catch(()=>{}),qm.set(e,t),e}(t);if(Gm.has(t))return Gm.get(t);const e=X9(t);return e!==t&&(Gm.set(t,e),qm.set(e,t)),e}const Wm=t=>qm.get(t),e3=["get","getKey","getAll","getAllKeys","count"],t3=["put","add","delete","clear"],Qm=new Map;function AS(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Qm.get(e))return Qm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=t3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!e3.includes(n))return;const o=function(){var s=x(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return s.apply(this,arguments)}}();return Qm.set(e,o),o}!function Y9(t){zm=t(zm)}(t=>({...t,get:(e,n,r)=>AS(e,n)||t.get(e,n,r),has:(e,n)=>!!AS(e,n)||t.has(e,n)}));class n3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function r3(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const Km="@firebase/app",Ai=new IS("@firebase/app"),md="[DEFAULT]",M3={[Km]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},bi=new Map,_d=new Map;function R3(t,e){try{t.container.addComponent(e)}catch(n){Ai.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yd(t){const e=t.name;if(_d.has(e))return Ai.debug(`There were multiple attempts to register component ${e}.`),!1;_d.set(e,t);for(const n of bi.values())R3(n,t);return!0}const lr=new _S("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class x3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}function MS(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:md,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw lr.create("bad-app-name",{appName:String(i)});if(n||(n=pS()),!n)throw lr.create("no-options");const o=bi.get(i);if(o){if(Bm(n,o.options)&&Bm(r,o.config))return o;throw lr.create("duplicate-app",{appName:i})}const s=new U9(i);for(const u of _d.values())s.addComponent(u);const a=new x3(n,r,s);return bi.set(i,a),a}function Qo(t,e,n){var r;let i=null!==(r=M3[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Ai.warn(a.join(" "))}yd(new Ya(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const O3="firebase-heartbeat-database",F3=1,Za="firebase-heartbeat-store";let Zm=null;function RS(){return Zm||(Zm=function J9(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Br(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Br(s.result),u.oldVersion,u.newVersion,Br(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}(O3,F3,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Za)}catch(n){console.warn(n)}}}).catch(t=>{throw lr.create("idb-open",{originalErrorMessage:t.message})})),Zm}function Xm(){return(Xm=x(function*(t){try{const n=(yield RS()).transaction(Za),r=yield n.objectStore(Za).get(xS(t));return yield n.done,r}catch(e){if(e instanceof Wo)Ai.warn(e.message);else{const n=lr.create("idb-get",{originalErrorMessage:e?.message});Ai.warn(n.message)}}})).apply(this,arguments)}function PS(t,e){return Jm.apply(this,arguments)}function Jm(){return(Jm=x(function*(t,e){try{const r=(yield RS()).transaction(Za,"readwrite");yield r.objectStore(Za).put(e,xS(t)),yield r.done}catch(n){if(n instanceof Wo)Ai.warn(n.message);else{const r=lr.create("idb-set",{originalErrorMessage:n?.message});Ai.warn(r.message)}}})).apply(this,arguments)}function xS(t){return`${t.name}!${t.options.appId}`}class j3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return x(function*(){var n,r;const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=NS();if((null!=(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)||(e._heartbeatsCache=yield e._heartbeatsCachePromise,null!=(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats)))&&e._heartbeatsCache.lastSentHeartbeatDate!==s&&!e._heartbeatsCache.heartbeats.some(a=>a.date===s))return e._heartbeatsCache.heartbeats.push({date:s,agent:o}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return x(function*(){var n;if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=NS(),{heartbeatsToSend:i,unsentEntries:o}=function U3(t,e=1024){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),VS(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),VS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=fd(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function NS(){return(new Date).toISOString().substring(0,10)}class $3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return x(function*(){return!!mS()&&function b9(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(n){e(n)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return x(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function k3(t){return Xm.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var n=this;return x(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return PS(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return x(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return PS(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function VS(t){return fd(JSON.stringify({version:2,heartbeats:t})).length}!function H3(t){yd(new Ya("platform-logger",e=>new n3(e),"PRIVATE")),yd(new Ya("heartbeat",e=>new j3(e),"PRIVATE")),Qo(Km,"0.9.28",t),Qo(Km,"0.9.28","esm2017"),Qo("fire-js","")}("");var R,G3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wn={},e_=e_||{},G=G3||self;function vd(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Xa(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var t_="closure_uid_"+(1e9*Math.random()>>>0),z3=0;function W3(t,e,n){return t.call.apply(t.bind,arguments)}function Q3(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function It(t,e,n){return(It=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?W3:Q3).apply(null,arguments)}function Ed(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function tt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function jr(){this.s=this.s,this.o=this.o}jr.prototype.s=!1,jr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function q3(t){Object.prototype.hasOwnProperty.call(t,t_)&&t[t_]||(t[t_]=++z3)}(this)},jr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const OS=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function n_(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function FS(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(vd(r)){const i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function Dt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Dt.prototype.h=function(){this.defaultPrevented=!0};var Y3=function(){if(!G.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};G.addEventListener("test",n,e),G.removeEventListener("test",n,e)}catch{}return t}();function Ja(t){return/^[\s\xa0]*$/.test(t)}function Id(){var t=G.navigator;return t&&(t=t.userAgent)?t:""}function Bn(t){return-1!=Id().indexOf(t)}function r_(t){return r_[" "](t),t}r_[" "]=function(){};var o_,t,X3=Bn("Opera"),Ko=Bn("Trident")||Bn("MSIE"),kS=Bn("Edge"),i_=kS||Ko,LS=Bn("Gecko")&&!(-1!=Id().toLowerCase().indexOf("webkit")&&!Bn("Edge"))&&!(Bn("Trident")||Bn("MSIE"))&&!Bn("Edge"),J3=-1!=Id().toLowerCase().indexOf("webkit")&&!Bn("Edge");function BS(){var t=G.document;return t?t.documentMode:void 0}e:{var s_="",a_=(t=Id(),LS?/rv:([^\);]+)(\)|;)/.exec(t):kS?/Edge\/([\d\.]+)/.exec(t):Ko?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):J3?/WebKit\/(\S+)/.exec(t):X3?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(a_&&(s_=a_?a_[1]:""),Ko){var u_=BS();if(null!=u_&&u_>parseFloat(s_)){o_=String(u_);break e}}o_=s_}var e6=G.document&&Ko&&(BS()||parseInt(o_,10))||void 0;function eu(t,e){if(Dt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(LS){e:{try{r_(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:t6[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&eu.$.h.call(this)}}tt(eu,Dt);var t6={2:"touch",3:"pen",4:"mouse"};eu.prototype.h=function(){eu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var tu="closure_listenable_"+(1e6*Math.random()|0),n6=0;function r6(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++n6,this.fa=this.ia=!1}function Dd(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function l_(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function US(t){const e={};for(const n in t)e[n]=t[n];return e}const $S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function HS(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let o=0;o<$S.length;o++)n=$S[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function wd(t){this.src=t,this.g={},this.h=0}function d_(t,e){var n=e.type;if(n in t.g){var o,r=t.g[n],i=OS(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Dd(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function h_(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}wd.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=h_(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):((e=new r6(e,this.src,o,!!r,i)).ia=n,t.push(e)),e};var f_="closure_lm_"+(1e6*Math.random()|0),p_={};function GS(t,e,n,r,i){if(r&&r.once)return zS(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)GS(t,e[o],n,r,i);return null}return n=y_(n),t&&t[tu]?t.O(e,n,Xa(r)?!!r.capture:!!r,i):qS(t,e,n,!1,r,i)}function qS(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Xa(i)?!!i.capture:!!i,a=m_(t);if(a||(t[f_]=a=new wd(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function o6(){const e=s6;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Y3||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(QS(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function zS(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)zS(t,e[o],n,r,i);return null}return n=y_(n),t&&t[tu]?t.P(e,n,Xa(r)?!!r.capture:!!r,i):qS(t,e,n,!0,r,i)}function WS(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)WS(t,e[o],n,r,i);else r=Xa(r)?!!r.capture:!!r,n=y_(n),t&&t[tu]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=h_(o=t.g[e],n,r,i))&&(Dd(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=m_(t))&&(e=t.g[e.toString()],t=-1,e&&(t=h_(e,n,r,i)),(n=-1<t?e[t]:null)&&g_(n))}function g_(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[tu])d_(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(QS(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=m_(e))?(d_(n,t),0==n.h&&(n.src=null,e[f_]=null)):Dd(t)}}}function QS(t){return t in p_?p_[t]:p_[t]="on"+t}function s6(t,e){if(t.fa)t=!0;else{e=new eu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&g_(t),t=n.call(r,e)}return t}function m_(t){return(t=t[f_])instanceof wd?t:null}var __="__closure_events_fn_"+(1e9*Math.random()>>>0);function y_(t){return"function"==typeof t?t:(t[__]||(t[__]=function(e){return t.handleEvent(e)}),t[__])}function nt(){jr.call(this),this.i=new wd(this),this.S=this,this.J=null}function lt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Dt(e,t);else if(e instanceof Dt)e.target=e.target||t;else{var i=e;HS(e=new Dt(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Td(s,r,!0,e)&&i}if(i=Td(s=e.g=t,r,!0,e)&&i,i=Td(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Td(s=e.g=n[o],r,!1,e)&&i}function Td(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&d_(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}tt(nt,jr),nt.prototype[tu]=!0,nt.prototype.removeEventListener=function(t,e,n,r){WS(this,t,e,n,r)},nt.prototype.N=function(){if(nt.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Dd(n[r]);delete t.g[e],t.h--}}this.J=null},nt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},nt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var v_=G.JSON.stringify;function u6(){var t=E_;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var KS=new class a6{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new l6,t=>t.reset());class l6{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function d6(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function h6(t){G.setTimeout(()=>{throw t},0)}let nu,ru=!1,E_=new class c6{constructor(){this.h=this.g=null}add(e,n){const r=KS.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},YS=()=>{const t=G.Promise.resolve(void 0);nu=()=>{t.then(f6)}};var f6=()=>{for(var t;t=u6();){try{t.h.call(t.g)}catch(n){h6(n)}var e=KS;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ru=!1};function Cd(t,e){nt.call(this),this.h=t||1,this.g=e||G,this.j=It(this.qb,this),this.l=Date.now()}function I_(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function D_(t,e,n){if("function"==typeof t)n&&(t=It(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=It(t.handleEvent,t)}return 2147483647<Number(e)?-1:G.setTimeout(t,e||0)}function ZS(t){t.g=D_(()=>{t.g=null,t.i&&(t.i=!1,ZS(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}tt(Cd,nt),(R=Cd.prototype).ga=!1,R.T=null,R.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),lt(this,"tick"),this.ga&&(I_(this),this.start()))}},R.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},R.N=function(){Cd.$.N.call(this),I_(this),delete this.g};class p6 extends jr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ZS(this)}N(){super.N(),this.g&&(G.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function iu(t){jr.call(this),this.h=t,this.g={}}tt(iu,jr);var XS=[];function JS(t,e,n,r){Array.isArray(n)||(n&&(XS[0]=n.toString()),n=XS);for(var i=0;i<n.length;i++){var o=GS(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function eM(t){l_(t.g,function(e,n){this.g.hasOwnProperty(n)&&g_(e)},t),t.g={}}function Ad(){this.g=!0}function Yo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function y6(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return v_(n)}catch{return e}}(t,n)+(r?" "+r:"")})}iu.prototype.N=function(){iu.$.N.call(this),eM(this)},iu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ad.prototype.Ea=function(){this.g=!1},Ad.prototype.info=function(){};var Si={},tM=null;function bd(){return tM=tM||new nt}function nM(t){Dt.call(this,Si.Ta,t)}function ou(t){const e=bd();lt(e,new nM(e))}function rM(t,e){Dt.call(this,Si.STAT_EVENT,t),this.stat=e}function Ft(t){const e=bd();lt(e,new rM(e,t))}function iM(t,e){Dt.call(this,Si.Ua,t),this.size=e}function su(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return G.setTimeout(function(){t()},e)}Si.Ta="serverreachability",tt(nM,Dt),Si.STAT_EVENT="statevent",tt(rM,Dt),Si.Ua="timingevent",tt(iM,Dt);var Sd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},oM={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function w_(){}function aM(){}w_.prototype.h=null;var A_,au={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function T_(){Dt.call(this,"d")}function C_(){Dt.call(this,"c")}function Md(){}function uu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new iu(this),this.P=v6,this.V=new Cd(t=i_?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new uM}function uM(){this.i=null,this.g="",this.h=!1}tt(T_,Dt),tt(C_,Dt),tt(Md,w_),Md.prototype.g=function(){return new XMLHttpRequest},Md.prototype.i=function(){return{}},A_=new Md;var v6=45e3,cM={},b_={};function S_(t,e,n){t.L=1,t.A=Nd(dr(e)),t.u=n,t.S=!0,lM(t,null)}function lM(t,e){t.G=Date.now(),cu(t),t.B=dr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),EM(n.i,"t",r),t.o=0,n=t.l.J,t.h=new uM,t.g=GM(t.l,n?e:null,!t.u),0<t.O&&(t.M=new p6(It(t.Pa,t,t.g),t.O)),JS(t.U,t.g,"readystatechange",t.nb),e=t.I?US(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ou(),function g6(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");s=2<=d.length&&"type"==d[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.v,t.B,t.m,t.W,t.u)}function dM(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function hM(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=E6(t,n),i==b_){4==e&&(t.s=4,Ft(14),r=!1),Yo(t.j,t.m,null,"[Incomplete Response]");break}if(i==cM){t.s=4,Ft(15),Yo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Yo(t.j,t.m,i,null),M_(t,i)}dM(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,Ft(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),F_(e),e.M=!0,Ft(11))):(Yo(t.j,t.m,n,"[Invalid Chunked Response]"),Mi(t),lu(t))}function E6(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?b_:(n=Number(e.substring(n,r)),isNaN(n)?cM:(r+=1)+n>e.length?b_:(e=e.slice(r,r+n),t.o=r+n,e))}function cu(t){t.Y=Date.now()+t.P,fM(t,t.P)}function fM(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=su(It(t.lb,t),e)}function Rd(t){t.C&&(G.clearTimeout(t.C),t.C=null)}function lu(t){0==t.l.H||t.J||jM(t.l,t)}function Mi(t){Rd(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,I_(t.V),eM(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function M_(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||R_(n.i,t)))if(!t.K&&R_(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;Bd(n),kd(n)}O_(n),Ft(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=su(It(n.ib,n),6e3));if(1>=wM(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Pi(n,11)}else if((t.K||n.g==t)&&Bd(n),!Ja(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const l=c[3];null!=l&&(n.ra=l,n.l.info("VER="+n.ra));const d=c[4];null!=d&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(n.L=r=1.5*h,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var o=r.i;o.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(P_(o,o.h),o.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,Ae(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=t;if((r=n).wa=HM(r,r.J?r.pa:null,r.Y),s.K){TM(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(Rd(a),cu(a)),r.g=s}else LM(r);0<n.j.length&&Ld(n)}else"stop"!=c[0]&&"close"!=c[0]||Pi(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Pi(n,7):V_(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}ou()}catch{}}function pM(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(vd(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function D6(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(vd(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function I6(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(vd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(R=uu.prototype).setTimeout=function(t){this.P=t},R.nb=function(t){t=t.target;const e=this.M;e&&3==jn(t)?e.l():this.Pa(t)},R.Pa=function(t){try{if(t==this.g)e:{const l=jn(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||i_||this.g&&(this.h.h||this.g.ja()||xM(this.g)))){this.J||4!=l||7==e||ou(),Rd(this);var n=this.g.da();this.ca=n;t:if(dM(this)){var r=xM(this.g);t="";var i=r.length,o=4==jn(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Mi(this),lu(this);var s="";break t}this.h.i=new G.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function m6(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ja(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,Ft(12),Mi(this),lu(this);break e}Yo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,M_(this,n)}this.S?(hM(this,l,s),i_&&this.i&&3==l&&(JS(this.U,this.V,"tick",this.mb),this.V.start())):(Yo(this.j,this.m,s,null),M_(this,s)),4==l&&Mi(this),this.i&&!this.J&&(4==l?jM(this.l,this):(this.i=!1,cu(this)))}else(function j6(t){const e={};t=(t.g&&2<=jn(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Ja(t[r]))continue;var n=d6(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const o=e[i]||[];e[i]=o,o.push(n)}!function i6(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),Mi(this),lu(this)}}}catch{}},R.mb=function(){if(this.g){var t=jn(this.g),e=this.g.ja();this.o<e.length&&(Rd(this),hM(this,t,e),this.i&&4!=t&&cu(this))}},R.cancel=function(){this.J=!0,Mi(this)},R.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function _6(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(ou(),Ft(17)),Mi(this),this.s=2,lu(this)):fM(this,this.Y-t)};var gM=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ri(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ri){this.h=t.h,Pd(this,t.j),this.s=t.s,this.g=t.g,xd(this,t.m),this.l=t.l;var e=t.i,n=new fu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),mM(this,n),this.o=t.o}else t&&(e=String(t).match(gM))?(this.h=!1,Pd(this,e[1]||"",!0),this.s=du(e[2]||""),this.g=du(e[3]||"",!0),xd(this,e[4]),this.l=du(e[5]||"",!0),mM(this,e[6]||"",!0),this.o=du(e[7]||"")):(this.h=!1,this.i=new fu(null,this.h))}function dr(t){return new Ri(t)}function Pd(t,e,n){t.j=n?du(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function xd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function mM(t,e,n){e instanceof fu?(t.i=e,function M6(t,e){e&&!t.j&&(Ur(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(yM(this,r),EM(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=hu(e,b6)),t.i=new fu(e,t.h))}function Ae(t,e,n){t.i.set(e,n)}function Nd(t){return Ae(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function du(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function hu(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,T6),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function T6(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ri.prototype.toString=function(){var t=[],e=this.j;e&&t.push(hu(e,_M,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(hu(e,_M,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(hu(n,"/"==n.charAt(0)?A6:C6,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",hu(n,S6)),t.join("")};var _M=/[#\/\?@]/g,C6=/[#\?:]/g,A6=/[#\?]/g,b6=/[#\?@]/g,S6=/#/g;function fu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ur(t){t.g||(t.g=new Map,t.h=0,t.i&&function w6(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function yM(t,e){Ur(t),e=Zo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function vM(t,e){return Ur(t),e=Zo(t,e),t.g.has(e)}function EM(t,e,n){yM(t,e),0<n.length&&(t.i=null,t.g.set(Zo(t,e),n_(n)),t.h+=n.length)}function Zo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function IM(t){this.l=t||P6,t=G.PerformanceNavigationTiming?0<(t=G.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(G.g&&G.g.Ka&&G.g.Ka()&&G.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(R=fu.prototype).add=function(t,e){Ur(this),this.i=null,t=Zo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},R.forEach=function(t,e){Ur(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},R.ta=function(){Ur(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n},R.Z=function(t){Ur(this);let e=[];if("string"==typeof t)vM(this,t)&&(e=e.concat(this.g.get(Zo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},R.set=function(t,e){return Ur(this),this.i=null,vM(this,t=Zo(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},R.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},R.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};var P6=10;function DM(t){return!!t.h||!!t.g&&t.g.size>=t.j}function wM(t){return t.h?1:t.g?t.g.size:0}function R_(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function P_(t,e){t.g?t.g.add(e):t.h=e}function TM(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function CM(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return n_(t.i)}IM.prototype.cancel=function(){if(this.i=CM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var x6=class{stringify(t){return G.JSON.stringify(t,void 0)}parse(t){return G.JSON.parse(t,void 0)}};function N6(){this.g=new x6}function V6(t,e,n){const r=n||"";try{pM(t,function(i,o){let s=i;Xa(i)&&(s=v_(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Vd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function pu(t){this.l=t.ec||null,this.j=t.ob||!1}function Od(t,e){nt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=x_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tt(pu,w_),pu.prototype.g=function(){return new Od(this.l,this.j)},pu.prototype.i=function(t){return function(){return t}}({}),tt(Od,nt);var x_=0;function AM(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function gu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,mu(t)}function mu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(R=Od.prototype).open=function(t,e){if(this.readyState!=x_)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,mu(this)},R.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||G).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},R.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gu(this)),this.readyState=x_},R.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,mu(this)),this.g&&(this.readyState=3,mu(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof G.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;AM(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},R.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?gu(this):mu(this),3==this.readyState&&AM(this)}},R.Za=function(t){this.g&&(this.response=this.responseText=t,gu(this))},R.Ya=function(t){this.g&&(this.response=t,gu(this))},R.ka=function(){this.g&&gu(this)},R.setRequestHeader=function(t,e){this.v.append(t,e)},R.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},R.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Od.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var F6=G.JSON.parse;function Le(t){nt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=bM,this.L=this.M=!1}tt(Le,nt);var bM="",k6=/^https?$/i,L6=["POST","PUT"];function SM(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,MM(t),Fd(t)}function MM(t){t.F||(t.F=!0,lt(t,"complete"),lt(t,"error"))}function RM(t){if(t.h&&typeof e_<"u"&&(!t.C[1]||4!=jn(t)||2!=t.da()))if(t.v&&4==jn(t))D_(t.La,0,t);else if(lt(t,"readystatechange"),4==jn(t)){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===s){var i=String(t.I).match(gM)[1]||null;!i&&G.self&&G.self.location&&(i=G.self.location.protocol.slice(0,-1)),r=!k6.test(i?i.toLowerCase():"")}n=r}if(n)lt(t,"complete"),lt(t,"success");else{t.m=6;try{var o=2<jn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",MM(t)}}finally{Fd(t)}}}function Fd(t,e){if(t.g){PM(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||lt(t,"ready");try{n.onreadystatechange=r}catch{}}}function PM(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(G.clearTimeout(t.A),t.A=null)}function jn(t){return t.g?t.g.readyState:0}function xM(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case bM:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function NM(t){let e="";return l_(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function N_(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=NM(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ae(t,e,n))}function _u(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function VM(t){this.Ga=0,this.j=[],this.l=new Ad,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=_u("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=_u("baseRetryDelayMs",5e3,t),this.hb=_u("retryDelaySeedMs",1e4,t),this.eb=_u("forwardChannelMaxRetries",2,t),this.xa=_u("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new IM(t&&t.concurrentRequestLimit),this.Ja=new N6,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function V_(t){if(OM(t),3==t.H){var e=t.W++,n=dr(t.I);if(Ae(n,"SID",t.K),Ae(n,"RID",e),Ae(n,"TYPE","terminate"),yu(t,n),(e=new uu(t,t.l,e)).L=2,e.A=Nd(dr(n)),n=!1,G.navigator&&G.navigator.sendBeacon)try{n=G.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&G.Image&&((new Image).src=e.A,n=!0),n||(e.g=GM(e.l,null),e.g.ha(e.A)),e.G=Date.now(),cu(e)}$M(t)}function kd(t){t.g&&(F_(t),t.g.cancel(),t.g=null)}function OM(t){kd(t),t.u&&(G.clearTimeout(t.u),t.u=null),Bd(t),t.i.cancel(),t.m&&("number"==typeof t.m&&G.clearTimeout(t.m),t.m=null)}function Ld(t){if(!DM(t.i)&&!t.m){t.m=!0;var e=t.Na;nu||YS(),ru||(nu(),ru=!0),E_.add(e,t),t.C=0}}function FM(t,e){var n;n=e?e.m:t.W++;const r=dr(t.I);Ae(r,"SID",t.K),Ae(r,"RID",n),Ae(r,"AID",t.V),yu(t,r),t.o&&t.s&&N_(r,t.o,t.s),n=new uu(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=kM(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),P_(t.i,n),S_(n,r,e)}function yu(t,e){t.na&&l_(t.na,function(n,r){Ae(e,r,n)}),t.h&&pM({},function(n,r){Ae(e,r,n)})}function kM(t,e,n){n=Math.min(t.j.length,n);var r=t.h?It(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+n];-1==o?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let c=i[u].g;const l=i[u].map;if(c-=o,0>c)o=Math.max(0,i[u].g-100),a=!1;else try{V6(l,s,"req"+c+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function LM(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;nu||YS(),ru||(nu(),ru=!0),E_.add(e,t),t.A=0}}function O_(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=su(It(t.Ma,t),UM(t,t.A)),t.A++,0))}function F_(t){null!=t.B&&(G.clearTimeout(t.B),t.B=null)}function BM(t){t.g=new uu(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=dr(t.wa);Ae(e,"RID","rpc"),Ae(e,"SID",t.K),Ae(e,"AID",t.V),Ae(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ae(e,"TO",t.qa),Ae(e,"TYPE","xmlhttp"),yu(t,e),t.o&&t.s&&N_(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Nd(dr(e)),n.u=null,n.S=!0,lM(n,t)}function Bd(t){null!=t.v&&(G.clearTimeout(t.v),t.v=null)}function jM(t,e){var n=null;if(t.g==e){Bd(t),F_(t),t.g=null;var r=2}else{if(!R_(t.i,e))return;n=e.F,TM(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;lt(r=bd(),new iM(r,n)),Ld(t)}else LM(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function U6(t,e){return!(wM(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=su(It(t.Na,t,e),UM(t,t.C)),t.C++,0)))}(t,e)||2==r&&O_(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Pi(t,5);break;case 4:Pi(t,10);break;case 3:Pi(t,6);break;default:Pi(t,2)}}function UM(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Pi(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=It(t.pb,t);n||(n=new Ri("//www.google.com/images/cleardot.gif"),G.location&&"http"==G.location.protocol||Pd(n,"https"),Nd(n)),function O6(t,e){const n=new Ad;if(G.Image){const r=new Image;r.onload=Ed(Vd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ed(Vd,n,r,"TestLoadImage: error",!1,e),r.onabort=Ed(Vd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ed(Vd,n,r,"TestLoadImage: timeout",!1,e),G.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ft(2);t.H=0,t.h&&t.h.za(e),$M(t),OM(t)}function $M(t){if(t.H=0,t.ma=[],t.h){const e=CM(t.i);(0!=e.length||0!=t.j.length)&&(FS(t.ma,e),FS(t.ma,t.j),t.i.i.length=0,n_(t.j),t.j.length=0),t.h.ya()}}function HM(t,e,n){var r=n instanceof Ri?dr(n):new Ri(n);if(""!=r.g)e&&(r.g=e+"."+r.g),xd(r,r.m);else{var i=G.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Ri(null);r&&Pd(o,r),e&&(o.g=e),i&&xd(o,i),n&&(o.l=n),r=o}return e=t.Da,(n=t.F)&&e&&Ae(r,n,e),Ae(r,"VER",t.ra),yu(t,r),r}function GM(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Le(t.Ha&&!t.va?new pu({ob:n}):t.va)).Oa(t.J),e}function qM(){}function jd(){if(Ko&&!(10<=Number(e6)))throw Error("Environmental error: no available transport.")}function Jt(t,e){nt.call(this),this.g=new VM(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ja(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ja(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Xo(this)}function zM(t){T_.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function WM(){C_.call(this),this.status=1}function Xo(t){this.g=t}function Tn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function k_(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var o=t.g[3],s=(e=t.g[0])+(o^(n=t.g[1])&((i=t.g[2])^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=n+(s<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=n+((s=e+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(e^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}function fe(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=0|t[i];r&&o==e||(n[i]=o,r=!1)}this.g=n}(R=Le.prototype).Oa=function(t){this.M=t},R.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():A_.g(),this.C=function sM(t){return t.h||(t.h=t.i())}(this.u?this.u:A_),this.g.onreadystatechange=It(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){return void SM(this,o)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())n.set(o,r.get(o))}r=Array.from(n.keys()).find(o=>"content-type"==o.toLowerCase()),i=G.FormData&&t instanceof G.FormData,!(0<=OS(L6,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{PM(this),0<this.B&&((this.L=function B6(t){return Ko&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=It(this.ua,this)):this.A=D_(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){SM(this,o)}},R.ua=function(){typeof e_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,lt(this,"timeout"),this.abort(8))},R.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,lt(this,"complete"),lt(this,"abort"),Fd(this))},R.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Fd(this,!0)),Le.$.N.call(this)},R.La=function(){this.s||(this.G||this.v||this.l?RM(this):this.kb())},R.kb=function(){RM(this)},R.isActive=function(){return!!this.g},R.da=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},R.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},R.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),F6(e)}},R.Ia=function(){return this.m},R.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(R=VM.prototype).ra=8,R.H=1,R.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new uu(this,this.l,t);let o=this.s;if(this.U&&(o?(o=US(o),HS(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=kM(this,i,e),Ae(n=dr(this.I),"RID",t),Ae(n,"CVER",22),this.F&&Ae(n,"X-HTTP-Session-Id",this.F),yu(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(NM(o)))+"&"+e:this.o&&N_(n,this.o,o)),P_(this.i,i),this.bb&&Ae(n,"TYPE","init"),this.P?(Ae(n,"$req",e),Ae(n,"SID","null"),i.aa=!0,S_(i,n,null)):S_(i,n,e),this.H=2}}else 3==this.H&&(t?FM(this,t):0==this.j.length||DM(this.i)||FM(this))},R.Ma=function(){if(this.u=null,BM(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=su(It(this.jb,this),t)}},R.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ft(10),kd(this),BM(this))},R.ib=function(){null!=this.v&&(this.v=null,kd(this),O_(this),Ft(19))},R.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ft(2)):(this.l.info("Failed to ping google.com"),Ft(1))},R.isActive=function(){return!!this.h&&this.h.isActive(this)},(R=qM.prototype).Ba=function(){},R.Aa=function(){},R.za=function(){},R.ya=function(){},R.isActive=function(){return!0},R.Va=function(){},jd.prototype.g=function(t,e){return new Jt(t,e)},tt(Jt,nt),Jt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ft(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=HM(t,null,t.Y),Ld(t)},Jt.prototype.close=function(){V_(this.g)},Jt.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=v_(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Ld(e)},Jt.prototype.N=function(){this.g.h=null,delete this.j,V_(this.g),delete this.g,Jt.$.N.call(this)},tt(zM,T_),tt(WM,C_),tt(Xo,qM),Xo.prototype.Ba=function(){lt(this.g,"a")},Xo.prototype.Aa=function(t){lt(this.g,new zM(t))},Xo.prototype.za=function(t){lt(this.g,new WM)},Xo.prototype.ya=function(){lt(this.g,"b")},tt(Tn,function $6(){this.blockSize=-1}),Tn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Tn.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=n;)k_(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){k_(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){k_(this,r),i=0;break}}this.h=i,this.i+=e},Tn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var H6={};function L_(t){return-128<=t&&128>t?function Z3(t,e){var n=H6;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new fe([0|e],0>e?-1:0)}):new fe([0|t],0>t?-1:0)}function Un(t){if(isNaN(t)||!isFinite(t))return Jo;if(0>t)return dt(Un(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=B_;return new fe(e,0)}var B_=4294967296,Jo=L_(0),j_=L_(1),KM=L_(16777216);function hr(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function dn(t){return-1==t.h}function dt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new fe(n,~t.h).add(j_)}function Ud(t,e){return t.add(dt(e))}function $d(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function vu(t,e){this.g=t,this.h=e}function Hd(t,e){if(hr(e))throw Error("division by zero");if(hr(t))return new vu(Jo,Jo);if(dn(t))return e=Hd(dt(t),e),new vu(dt(e.g),dt(e.h));if(dn(e))return e=Hd(t,dt(e)),new vu(dt(e.g),e.h);if(30<t.g.length){if(dn(t)||dn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=j_,r=e;0>=r.X(t);)n=YM(n),r=YM(r);var i=es(n,1),o=es(r,1);for(r=es(r,2),n=es(n,2);!hr(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=es(r,1),n=es(n,1)}return e=Ud(t,i.R(e)),new vu(i,e)}for(i=Jo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=Un(n)).R(e);dn(s)||0<s.X(t);)s=(o=Un(n-=r)).R(e);hr(o)&&(o=j_),i=i.add(o),t=Ud(t,s)}return new vu(i,t)}function YM(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new fe(n,t.h)}function es(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new fe(i,t.h)}(R=fe.prototype).ea=function(){if(dn(this))return-dt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:B_+r)*e,e*=B_}return t},R.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(hr(this))return"0";if(dn(this))return"-"+dt(this).toString(t);for(var e=Un(Math.pow(t,6)),n=this,r="";;){var i=Hd(n,e).g,o=((0<(n=Ud(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(hr(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},R.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},R.X=function(t){return dn(t=Ud(this,t))?-1:hr(t)?0:1},R.abs=function(){return dn(this)?dt(this):this},R.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&t.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,n[i]=(s&=65535)<<16|(o&=65535)}return new fe(n,-2147483648&n[n.length-1]?-1:0)},R.R=function(t){if(hr(this)||hr(t))return Jo;if(dn(this))return dn(t)?dt(this).R(dt(t)):dt(dt(this).R(t));if(dn(t))return dt(this.R(dt(t)));if(0>this.X(KM)&&0>t.X(KM))return Un(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=s*u,$d(n,2*r+2*i),n[2*r+2*i+1]+=o*u,$d(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,$d(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,$d(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new fe(n,0)},R.gb=function(t){return Hd(this,t).h},R.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new fe(n,this.h&t.h)},R.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new fe(n,this.h|t.h)},R.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new fe(n,this.h^t.h)},jd.prototype.createWebChannel=jd.prototype.g,Jt.prototype.send=Jt.prototype.u,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,Sd.NO_ERROR=0,Sd.TIMEOUT=8,Sd.HTTP_ERROR=6,oM.COMPLETE="complete",aM.EventType=au,au.OPEN="a",au.CLOSE="b",au.ERROR="c",au.MESSAGE="d",nt.prototype.listen=nt.prototype.O,Le.prototype.listenOnce=Le.prototype.P,Le.prototype.getLastError=Le.prototype.Sa,Le.prototype.getLastErrorCode=Le.prototype.Ia,Le.prototype.getStatus=Le.prototype.da,Le.prototype.getResponseJson=Le.prototype.Wa,Le.prototype.getResponseText=Le.prototype.ja,Le.prototype.send=Le.prototype.ha,Le.prototype.setWithCredentials=Le.prototype.Oa,Tn.prototype.digest=Tn.prototype.l,Tn.prototype.reset=Tn.prototype.reset,Tn.prototype.update=Tn.prototype.j,fe.prototype.add=fe.prototype.add,fe.prototype.multiply=fe.prototype.R,fe.prototype.modulo=fe.prototype.gb,fe.prototype.compare=fe.prototype.X,fe.prototype.toNumber=fe.prototype.ea,fe.prototype.toString=fe.prototype.toString,fe.prototype.getBits=fe.prototype.D,fe.fromNumber=Un,fe.fromString=function QM(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return dt(QM(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Un(Math.pow(e,8)),r=Jo,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=Un(Math.pow(e,o)),r=r.R(o).add(Un(s))):r=(r=r.R(n)).add(Un(s))}return r};var G6=wn.createWebChannelTransport=function(){return new jd},q6=wn.getStatEventTarget=function(){return bd()},U_=wn.ErrorCode=Sd,z6=wn.EventType=oM,W6=wn.Event=Si,ZM=wn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Gd=(wn.FetchXmlHttpFactory=pu,wn.WebChannel=aM),Q6=wn.XhrIo=Le,K6=wn.Md5=Tn,ts=wn.Integer=fe;const XM="@firebase/firestore";class rt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");let ns="10.8.1";const $r=new IS("@firebase/firestore");function rs(){return $r.logLevel}function w(t,...e){if($r.logLevel<=oe.DEBUG){const n=e.map($_);$r.debug(`Firestore (${ns}): ${t}`,...n)}}function He(t,...e){if($r.logLevel<=oe.ERROR){const n=e.map($_);$r.error(`Firestore (${ns}): ${t}`,...n)}}function en(t,...e){if($r.logLevel<=oe.WARN){const n=e.map($_);$r.warn(`Firestore (${ns}): ${t}`,...n)}}function $_(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function N(t="Unexpected state"){const e=`FIRESTORE (${ns}) INTERNAL ASSERTION FAILED: `+t;throw He(e),new Error(e)}function O(t,e){t||N()}function S(t,e){return t}const v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class T extends Wo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xe{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class JM{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Y6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rt.UNAUTHENTICATED))}shutdown(){}}class Z6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class X6{constructor(e){this.t=e,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const o=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let s=new Xe;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xe,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(x(function*(){yield c.promise,yield o(r.currentUser)}))},u=c=>{w("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(w("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xe)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(w("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(O("string"==typeof r.accessToken),new JM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return O(null===e||"string"==typeof e),new rt(e)}}class J6{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class eq{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new J6(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tq{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=o=>{null!=o.error&&w("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,w("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{w("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):w("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(O("string"==typeof n.token),this.R=n.token,new eR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nq(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class tR{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=nq(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function U(t,e){return t<e?-1:t>e?1:0}function is(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class Ve{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new T(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new T(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new T(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ve(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?U(this.nanoseconds,e.nanoseconds):U(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class F{constructor(e){this.timestamp=e}static fromTimestamp(e){return new F(e)}static min(){return new F(new Ve(0,0))}static max(){return new F(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Eu{constructor(e,n,r){void 0===n?n=0:n>e.length&&N(),void 0===r?r=e.length-n:r>e.length-n&&N(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Eu.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Eu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Z extends Eu{construct(e,n,r){return new Z(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new T(v.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Z(n)}static emptyPath(){return new Z([])}}const rq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Re extends Eu{construct(e,n,r){return new Re(e,n,r)}static isValidIdentifier(e){return rq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Re.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Re(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new T(v.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new T(v.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new T(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new T(v.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Re(n)}static emptyPath(){return new Re([])}}class M{constructor(e){this.path=e}static fromPath(e){return new M(Z.fromString(e))}static fromName(e){return new M(Z.fromString(e).popFirst(5))}static empty(){return new M(Z.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Z.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Z.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new M(new Z(e.slice()))}}function iR(t){return new tn(t.readTime,t.key,-1)}class tn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new tn(F.min(),M.empty(),-1)}static max(){return new tn(F.max(),M.empty(),-1)}}function G_(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=M.comparator(t.documentKey,e.documentKey),0!==n?n:U(t.largestBatchId,e.largestBatchId))}const oR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Hr(t){return q_.apply(this,arguments)}function q_(){return q_=x(function*(t){if(t.code!==v.FAILED_PRECONDITION||t.message!==oR)throw t;w("LocalStore","Unexpectedly lost primary lease")}),q_.apply(this,arguments)}class y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&N(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new y((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof y?n:y.resolve(n)}catch(n){return y.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):y.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):y.reject(n)}static resolve(e){return new y((n,r)=>{n(e)})}static reject(e){return new y((n,r)=>{r(e)})}static waitFor(e){return new y((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=y.resolve(!1);for(const r of e)n=n.next(i=>i?y.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new y((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const c=u;n(e[c]).next(l=>{s[c]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,n){return new y((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}class qd{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Xe,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Iu(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=z_(r.target.error);this.V.reject(new Iu(e,i))}}static open(e,n,r,i){try{return new qd(n,e.transaction(i,r))}catch(o){throw new Iu(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(w("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new uq(n)}}class hn{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===hn.S(Lr())&&He("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return w("SimpleDb","Removing database:",e),Vi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!mS())return!1;if(hn.C())return!0;const e=Lr(),n=hn.S(e),r=0<n&&n<10,i=hn.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return x(function*(){return n.db||(w("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const o=indexedDB.open(n.name,n.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new Iu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new T(v.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new T(v.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Iu(e,a))},o.onupgradeneeded=s=>{w("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',s.oldVersion),n.p.N(s.target.result,o.transaction,s.oldVersion,n.version).next(()=>{w("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var o=this;return x(function*(){const s="readonly"===n;let a=0;for(;;){++a;try{o.db=yield o.O(e);const u=qd.open(o.db,e,s?"readonly":"readwrite",r),c=i(u).next(l=>(u.g(),l)).catch(l=>(u.abort(l),y.reject(l))).toPromise();return c.catch(()=>{}),yield u.m,c}catch(u){const c=u,l="FirebaseError"!==c.name&&a<3;if(w("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),o.close(),!l)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class aq{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Vi(this.k.delete())}}class Iu extends T{constructor(e,n){super(v.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Gr(t){return"IndexedDbTransactionError"===t.name}class uq{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(w("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(w("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Vi(r)}add(e){return w("SimpleDb","ADD",this.store.name,e,e),Vi(this.store.add(e))}get(e){return Vi(this.store.get(e)).next(n=>(void 0===n&&(n=null),w("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return w("SimpleDb","DELETE",this.store.name,e),Vi(this.store.delete(e))}count(){return w("SimpleDb","COUNT",this.store.name),Vi(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new y((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{const o=this.cursor(r),s=[];return this.G(o,(a,u)=>{s.push(u)}).next(()=>s)}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new y((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){w("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new y((r,i)=>{n.onerror=o=>{const s=z_(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){const r=[];return new y((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new aq(a),c=n(a.primaryKey,a.value,u);if(c instanceof y){const l=c.catch(d=>(u.done(),y.reject(d)));r.push(l)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>y.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Vi(t){return new y((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=z_(r.target.error);n(i)}})}let sR=!1;function z_(t){const e=hn.S(Lr());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new T("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sR||(sR=!0,setTimeout(()=>{throw r},0)),r}}return t}let nn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Du(t){return null==t}function wu(t){return 0===t&&1/t==-1/0}function pR(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Te{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new Te(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Te(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wd(this.root,e,this.comparator,!0)}}class Wd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??ht.RED,this.left=i??ht.EMPTY,this.right=o??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new ht(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return ht.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw N();const e=this.left.check();if(e!==this.right.check())throw N();return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1,ht.EMPTY=new class{constructor(){this.size=0}get key(){throw N()}get value(){throw N()}get color(){throw N()}get left(){throw N()}get right(){throw N()}copy(e,n,r,i,o){return this}insert(e,n,r){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class me{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mR(this.data.getIterator())}getIteratorFrom(e){return new mR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof me)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new me(this.comparator);return n.data=e,n}}class mR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class qt{constructor(e){this.fields=e,e.sort(Re.comparator)}static empty(){return new qt([])}unionWith(e){let n=new me(Re.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new qt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return is(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class _R extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Je{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _R("Invalid base64 string: "+o):o}}(e);return new Je(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Je(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return U(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Je.EMPTY_BYTE_STRING=new Je("");const Mq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(t){if(O(!!t),"string"==typeof t){let e=0;const n=Mq.exec(t);if(O(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function fr(t){return"string"==typeof t?Je.fromBase64String(t):Je.fromUint8Array(t)}function Qd(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kd(t){const e=t.mapValue.fields.__previous_value__;return Qd(e)?Kd(e):e}function Tu(t){const e=zr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}class Rq{constructor(e,n,r,i,o,s,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Oi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Oi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Oi&&e.projectId===this.projectId&&e.database===this.database}}const Wr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qd(t)?4:IR(t)?9007199254740991:10:N()}function Hn(t,e){if(t===e)return!0;const n=Qr(t);if(n!==Qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Tu(t).isEqual(Tu(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=zr(i.timestampValue),a=zr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,fr(t.bytesValue).isEqual(fr(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Be(i.geoPointValue.latitude)===Be(o.geoPointValue.latitude)&&Be(i.geoPointValue.longitude)===Be(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Be(i.integerValue)===Be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Be(i.doubleValue),a=Be(o.doubleValue);return s===a?wu(s)===wu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return is(t.arrayValue.values||[],e.arrayValue.values||[],Hn);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(pR(s)!==pR(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!Hn(s[u],a[u])))return!1;return!0}(t,e);default:return N()}var o}function Cu(t,e){return void 0!==(t.values||[]).find(n=>Hn(n,e))}function Kr(t,e){if(t===e)return 0;const n=Qr(t),r=Qr(e);if(n!==r)return U(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return U(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=Be(o.integerValue||o.doubleValue),u=Be(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return yR(t.timestampValue,e.timestampValue);case 4:return yR(Tu(t),Tu(e));case 5:return U(t.stringValue,e.stringValue);case 6:return function(o,s){const a=fr(o),u=fr(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){const l=U(a[c],u[c]);if(0!==l)return l}return U(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=U(Be(o.latitude),Be(s.latitude));return 0!==a?a:U(Be(o.longitude),Be(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],u=s.values||[];for(let c=0;c<a.length&&c<u.length;++c){const l=Kr(a[c],u[c]);if(l)return l}return U(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Wr.mapValue&&s===Wr.mapValue)return 0;if(o===Wr.mapValue)return 1;if(s===Wr.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),c=s.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let d=0;d<u.length&&d<l.length;++d){const h=U(u[d],l[d]);if(0!==h)return h;const f=Kr(a[u[d]],c[l[d]]);if(0!==f)return f}return U(u.length,l.length)}(t.mapValue,e.mapValue);default:throw N()}}function yR(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return U(t,e);const n=zr(t),r=zr(e),i=U(n.seconds,r.seconds);return 0!==i?i:U(n.nanos,r.nanos)}function us(t){return Q_(t)}function Q_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=zr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?fr(t.bytesValue).toBase64():"referenceValue"in t?M.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Q_(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Q_(n.fields[s])}`;return i+"}"}(t.mapValue):N()}function Fi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function K_(t){return!!t&&"integerValue"in t}function Au(t){return!!t&&"arrayValue"in t}function vR(t){return!!t&&"nullValue"in t}function ER(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xd(t){return!!t&&"mapValue"in t}function bu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=bu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function IR(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class ft{constructor(e){this.value=e}static empty(){return new ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bu(n)}setAll(e){let n=Re.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=bu(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Xd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){qr(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new ft(bu(this.value))}}function TR(t){const e=[];return qr(t.fields,(n,r)=>{const i=new Re([n]);if(Xd(r)){const o=TR(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new qt(e)}class be{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new be(e,0,F.min(),F.min(),F.min(),ft.empty(),0)}static newFoundDocument(e,n,r,i){return new be(e,1,n,F.min(),r,i,0)}static newNoDocument(e,n){return new be(e,2,n,F.min(),F.min(),ft.empty(),0)}static newUnknownDocument(e,n){return new be(e,3,n,F.min(),F.min(),ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(F.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=F.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof be&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new be(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yr{constructor(e,n){this.position=e,this.inclusive=n}}function CR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?M.comparator(M.fromName(s.referenceValue),n.key):Kr(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function AR(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hn(t.position[n],e.position[n]))return!1;return!0}class Su{constructor(e,n="asc"){this.field=e,this.dir=n}}function Nq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class bR{}class X extends bR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new Vq(e,n,r):"array-contains"===n?new kq(e,r):"in"===n?new NR(e,r):"not-in"===n?new Lq(e,r):"array-contains-any"===n?new Bq(e,r):new X(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new Oq(e,r):new Fq(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Kr(n,this.value)):null!==n&&Qr(this.value)===Qr(n)&&this.matchesComparison(Kr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return N()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pe extends bR{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new pe(e,n)}matches(e){return cs(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function cs(t){return"and"===t.op}function Z_(t){return function SR(t){for(const e of t.filters)if(e instanceof pe)return!1;return!0}(t)&&cs(t)}function X_(t){if(t instanceof X)return t.field.canonicalString()+t.op.toString()+us(t.value);if(Z_(t))return t.filters.map(e=>X_(e)).join(",");{const e=t.filters.map(n=>X_(n)).join(",");return`${t.op}(${e})`}}function MR(t,e){return t instanceof X?(r=t,(i=e)instanceof X&&r.op===i.op&&r.field.isEqual(i.field)&&Hn(r.value,i.value)):t instanceof pe?function(r,i){return i instanceof pe&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&MR(s,i.filters[a]),!0)}(t,e):void N();var r,i}function PR(t){return t instanceof X?`${(n=t).field.canonicalString()} ${n.op} ${us(n.value)}`:t instanceof pe?function(n){return n.op.toString()+" {"+n.getFilters().map(PR).join(" ,")+"}"}(t):"Filter";var n}class Vq extends X{constructor(e,n,r){super(e,n,r),this.key=M.fromName(r.referenceValue)}matches(e){const n=M.comparator(e.key,this.key);return this.matchesComparison(n)}}class Oq extends X{constructor(e,n){super(e,"in",n),this.keys=xR(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Fq extends X{constructor(e,n){super(e,"not-in",n),this.keys=xR(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function xR(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>M.fromName(r.referenceValue))}class kq extends X{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Au(n)&&Cu(n.arrayValue,this.value)}}class NR extends X{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Cu(this.value.arrayValue,n)}}class Lq extends X{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Cu(this.value.arrayValue,n)}}class Bq extends X{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Au(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Cu(this.value.arrayValue,r))}}class jq{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function J_(t,e=null,n=[],r=[],i=null,o=null,s=null){return new jq(t,e,n,r,i,o,s)}function ki(t){const e=S(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>X_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Du(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>us(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>us(r)).join(",")),e.ce=n}return e.ce}function Mu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Nq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!MR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!AR(t.startAt,e.startAt)&&AR(t.endAt,e.endAt)}function Jd(t){return M.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class pr{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function ls(t){return new pr(t)}function kR(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function ey(t){return null!==t.collectionGroup}function ds(t){const e=S(t);if(null===e.le){e.le=[];const n=new Set;for(const o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new me(Re.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new Su(o,r))}),n.has(Re.keyField().canonicalString())||e.le.push(new Su(Re.keyField(),r))}return e.le}function kt(t){const e=S(t);return e.he||(e.he=function LR(t,e){if("F"===t.limitType)return J_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new Su(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Yr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yr(t.startAt.position,t.startAt.inclusive):null;return J_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,ds(t))),e.he}function ty(t,e){const n=t.filters.concat([e]);return new pr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function th(t,e,n){return new pr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ru(t,e){return Mu(kt(t),kt(e))&&t.limitType===e.limitType}function BR(t){return`${ki(kt(t))}|lt:${t.limitType}`}function hs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>PR(i)).join(", ")}]`),Du(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>us(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>us(i)).join(",")),`Target(${r})`}(kt(t))}; limitType=${t.limitType})`}function Pu(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):M.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of ds(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,u){const c=CR(s,a,u);return s.inclusive?c<=0:c<0}(r.startAt,ds(r),i)||r.endAt&&!function(s,a,u){const c=CR(s,a,u);return s.inclusive?c>=0:c>0}(r.endAt,ds(r),i)));var r,i}function UR(t){return(e,n)=>{let r=!1;for(const i of ds(t)){const o=Uq(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Uq(t,e,n){const r=t.field.isKeyField()?M.comparator(e.key,n.key):function(o,s,a){const u=s.data.field(o),c=a.data.field(o);return null!==u&&null!==c?Kr(u,c):N()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return N()}}class gr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qr(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return gR(this.inner)}size(){return this.innerSize}}const $q=new Te(M.comparator);function zt(){return $q}const $R=new Te(M.comparator);function xu(...t){let e=$R;for(const n of t)e=e.insert(n.key,n);return e}function HR(t){let e=$R;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gn(){return Nu()}function GR(){return Nu()}function Nu(){return new gr(t=>t.toString(),(t,e)=>t.isEqual(e))}const Hq=new Te(M.comparator),Gq=new me(M.comparator);function K(...t){let e=Gq;for(const n of t)e=e.add(n);return e}const qq=new me(U);function qR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wu(e)?"-0":e}}function zR(t){return{integerValue:""+t}}function WR(t,e){return function aR(t){return"number"==typeof t&&Number.isInteger(t)&&!wu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?zR(e):qR(t,e)}class nh{constructor(){this._=void 0}}function zq(t,e,n){return t instanceof fs?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Qd(o)&&(o=Kd(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Li?KR(t,e):t instanceof Bi?YR(t,e):function(i,o){const s=QR(i,o),a=ZR(s)+ZR(i.Ie);return K_(s)&&K_(i.Ie)?zR(a):qR(i.serializer,a)}(t,e)}function Wq(t,e,n){return t instanceof Li?KR(t,e):t instanceof Bi?YR(t,e):n}function QR(t,e){return t instanceof ps?K_(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class fs extends nh{}class Li extends nh{constructor(e){super(),this.elements=e}}function KR(t,e){const n=XR(e);for(const r of t.elements)n.some(i=>Hn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Bi extends nh{constructor(e){super(),this.elements=e}}function YR(t,e){let n=XR(e);for(const r of t.elements)n=n.filter(i=>!Hn(i,r));return{arrayValue:{values:n}}}class ps extends nh{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function ZR(t){return Be(t.integerValue||t.doubleValue)}function XR(t){return Au(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Vu{constructor(e,n){this.field=e,this.transform=n}}class Kq{constructor(e,n){this.version=e,this.transformResults=n}}class Pe{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Pe}static exists(e){return new Pe(void 0,e)}static updateTime(e){return new Pe(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class ih{}function JR(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new ms(t.key,Pe.none()):new gs(t.key,t.data,Pe.none());{const n=t.data,r=ft.empty();let i=new me(Re.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new mr(t.key,r,new qt(i.toArray()),Pe.none())}}function Yq(t,e,n){t instanceof gs?function(i,o,s){const a=i.value.clone(),u=nP(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof mr?function(i,o,s){if(!rh(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=nP(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(tP(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Ou(t,e,n,r){return t instanceof gs?function(o,s,a,u){if(!rh(o.precondition,s))return a;const c=o.value.clone(),l=rP(o.fieldTransforms,u,s);return c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof mr?function(o,s,a,u){if(!rh(o.precondition,s))return a;const c=rP(o.fieldTransforms,u,s),l=s.data;return l.setAll(tP(o)),l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):(a=n,rh(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function Zq(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=QR(r.transform,i||null);null!=o&&(null===n&&(n=ft.empty()),n.set(r.field,o))}return n||null}function eP(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&is(r,i,(o,s)=>function Qq(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Li&&i instanceof Li||r instanceof Bi&&i instanceof Bi?is(r.elements,i.elements,Hn):r instanceof ps&&i instanceof ps?Hn(r.Ie,i.Ie):r instanceof fs&&i instanceof fs);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class gs extends ih{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class mr extends ih{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function tP(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function nP(t,e,n){const r=new Map;O(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Wq(s,a,n[i]))}return r}function rP(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,zq(o,s,e))}return r}class ms extends ih{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ry extends ih{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class iy{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Yq(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ou(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ou(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=GR();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=JR(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(F.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),K())}isEqual(e){return this.batchId===e.batchId&&is(this.mutations,e.mutations,(n,r)=>eP(n,r))&&is(this.baseMutations,e.baseMutations,(n,r)=>eP(n,r))}}class oy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){O(e.mutations.length===r.length);let i=Hq;const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new oy(e,n,r,i)}}class sy{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Jq{constructor(e,n){this.count=e,this.unchangedNames=n}}var Qe,ie;function oP(t){if(void 0===t)return He("GRPC error has no .code"),v.UNKNOWN;switch(t){case Qe.OK:return v.OK;case Qe.CANCELLED:return v.CANCELLED;case Qe.UNKNOWN:return v.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return v.INTERNAL;case Qe.UNAVAILABLE:return v.UNAVAILABLE;case Qe.UNAUTHENTICATED:return v.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case Qe.NOT_FOUND:return v.NOT_FOUND;case Qe.ALREADY_EXISTS:return v.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return v.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case Qe.ABORTED:return v.ABORTED;case Qe.OUT_OF_RANGE:return v.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return v.UNIMPLEMENTED;case Qe.DATA_LOSS:return v.DATA_LOSS;default:return N()}}(ie=Qe||(Qe={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";const ez=new ts([4294967295,4294967295],0);function aP(t){const e=function sP(){return new TextEncoder}().encode(t),n=new K6;return n.update(e),new Uint8Array(n.digest())}function uP(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ts([n,r],0),new ts([i,o],0)]}class ay{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fu(`Invalid padding: ${n}`);if(r<0)throw new Fu(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Fu(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Fu(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=ts.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(ts.fromNumber(r)));return 1===i.compare(ez)&&(i=new ts([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=aP(e),[r,i]=uP(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new ay(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Te)return;const n=aP(e),[r,i]=uP(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Re(s)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ku{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Lu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ku(F.min(),i,new Te(U),zt(),K())}}class Lu{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Lu(r,n,K(),K(),K())}}class sh{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class cP{constructor(e,n){this.targetId=e,this.fe=n}}class lP{constructor(e,n,r=Je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class dP{constructor(){this.ge=0,this.pe=fP(),this.ye=Je.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=K(),n=K(),r=K();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:N()}}),new Lu(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=fP()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,O(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class tz{constructor(e){this.Le=e,this.ke=new Map,this.qe=zt(),this.Qe=hP(),this.Ke=new Te(U)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:N()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const o=i.target;if(Jd(o))if(0===r){const s=new M(o.path);this.We(n,s,be.newNoDocument(s,F.min()))}else O(1===r);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(e),u=a?this.et(a,e,s):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=fr(r).toUint8Array()}catch(u){if(u instanceof _R)return en("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new ay(s,i,o)}catch(u){return en(u instanceof Fu?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&Jd(a.target)){const u=new M(a.target.path);null!==this.qe.get(u)||this.st(s,u)||this.We(s,u,be.newNoDocument(u,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=K();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const c=this.Ye(u);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new ku(e,n,this.Ke,this.qe,r);return this.qe=zt(),this.Qe=hP(),this.Ke=new Te(U),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new dP,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new me(U),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||w("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new dP),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function hP(){return new Te(M.comparator)}function fP(){return new Te(M.comparator)}const nz={asc:"ASCENDING",desc:"DESCENDING"},rz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iz={and:"AND",or:"OR"};class oz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function uy(t,e){return t.useProto3Json||Du(e)?e:{value:e}}function _s(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function sz(t,e){return _s(t,e.toTimestamp())}function Ge(t){return O(!!t),F.fromTimestamp(function(n){const r=zr(n);return new Ve(r.seconds,r.nanos)}(t))}function cy(t,e){return ly(t,e).canonicalString()}function ly(t,e){const n=(i=t,new Z(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function gP(t){const e=Z.fromString(t);return O(CP(e)),e}function Bu(t,e){return cy(t.databaseId,e.path)}function qn(t,e){const n=gP(e);if(n.get(1)!==t.databaseId.projectId)throw new T(v.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new T(v.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new M(yP(n))}function mP(t,e){return cy(t.databaseId,e)}function dy(t){return new Z(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yP(t){return O(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function vP(t,e,n){return{name:Bu(t,e),fields:n.value.mapValue.fields}}function IP(t,e){return{documents:[mP(t,e.path)]}}function fy(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mP(t,i);const o=function(c){if(0!==c.length)return TP(pe.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(c){if(0!==c.length)return c.map(l=>{return{field:Zr((h=l).field),direction:dz(h.dir)};var h})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=uy(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i};var c}function DP(t){let e=function _P(t){const e=gP(t);return 4===e.length?Z.emptyPath():yP(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){O(1===r);const l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];n.where&&(o=function(d){const h=wP(d);return h instanceof pe&&Z_(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(h=>{return new Su(ys((p=h).field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction));var p}));let a=null;n.limit&&(a=function(d){let h;return h="object"==typeof d?d.value:d,Du(h)?null:h}(n.limit));let u=null;var d;n.startAt&&(u=new Yr((d=n.startAt).values||[],!!d.before));let c=null;return n.endAt&&(c=function(d){return new Yr(d.values||[],!d.before)}(n.endAt)),function FR(t,e,n,r,i,o,s,a){return new pr(t,e,n,r,i,o,s,a)}(e,i,s,o,a,"F",u,c)}function wP(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ys(n.unaryFilter.field);return X.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ys(n.unaryFilter.field);return X.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ys(n.unaryFilter.field);return X.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ys(n.unaryFilter.field);return X.create(s,"!=",{nullValue:"NULL_VALUE"});default:return N()}}(t):void 0!==t.fieldFilter?X.create(ys((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return N()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return pe.create(n.compositeFilter.filters.map(r=>wP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return N()}}(n.compositeFilter.op))}(t):N();var n}function dz(t){return nz[t]}function hz(t){return rz[t]}function fz(t){return iz[t]}function Zr(t){return{fieldPath:t.canonicalString()}}function ys(t){return Re.fromServerFormat(t.fieldPath)}function TP(t){return t instanceof X?function(n){if("=="===n.op){if(ER(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NAN"}};if(vR(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(ER(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NOT_NAN"}};if(vR(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zr(n.field),op:hz(n.op),value:n.value}}}(t):t instanceof pe?function(n){const r=n.getFilters().map(i=>TP(i));return 1===r.length?r[0]:{compositeFilter:{op:fz(n.op),filters:r}}}(t):N()}function pz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function CP(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class _r{constructor(e,n,r,i,o=F.min(),s=F.min(),a=Je.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new _r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class AP{constructor(e){this.ct=e}}function py(t){const e=DP({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?th(e,e.limit,"L"):e}class Hi{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Be(e.integerValue));else if("doubleValue"in e){const r=Be(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),wu(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(n,20),"string"==typeof r?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(fr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?IR(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):N()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),M.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}Hi.bt=new Hi;class Dz{constructor(){this._n=new Ey}addToCollectionParentIndex(e,n){return this._n.add(n),y.resolve()}getCollectionParents(e,n){return y.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return y.resolve()}deleteFieldIndex(e,n){return y.resolve()}deleteAllFieldIndexes(e){return y.resolve()}createTargetIndexes(e,n){return y.resolve()}getDocumentsMatchingTarget(e,n){return y.resolve(null)}getIndexType(e,n){return y.resolve(0)}getFieldIndexes(e,n){return y.resolve([])}getNextCollectionGroupToUpdate(e){return y.resolve(null)}getMinOffset(e,n){return y.resolve(tn.min())}getMinOffsetFromCollectionGroup(e,n){return y.resolve(tn.min())}updateCollectionGroup(e,n,r){return y.resolve()}updateIndexEntries(e,n){return y.resolve()}}class Ey{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new me(Z.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new me(Z.comparator)).toArray()}}new Uint8Array(0);class Tt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Tt(e,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Tt.DEFAULT_COLLECTION_PERCENTILE=10,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tt.DEFAULT=new Tt(41943040,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tt.DISABLED=new Tt(-1,0,0);class qi{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new qi(0)}static Bn(){return new qi(-1)}}class Sz{constructor(){this.changes=new gr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,be.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?y.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Pz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class JP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Ou(r.mutation,i,qt.empty(),Ve.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,K()).next(()=>r))}getLocalViewOfDocuments(e,n,r=K()){const i=Gn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=xu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Gn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,K()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=zt();const s=Nu(),a=Nu();return n.forEach((u,c)=>{const l=r.get(c.key);i.has(c.key)&&(void 0===l||l.mutation instanceof mr)?o=o.insert(c.key,c):void 0!==l?(s.set(c.key,l.mutation.getFieldMask()),Ou(l.mutation,c,l.mutation.getFieldMask(),Ve.now())):s.set(c.key,qt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,l)=>s.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new Pz(l,null!==(d=s.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Nu();let i=new Te((s,a)=>s-a),o=K();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(u=>{const c=n.get(u);if(null===c)return;let l=r.get(u)||qt.empty();l=a.applyToLocalView(c,l),r.set(u,l);const d=(i.get(a.batchId)||K()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,l=u.value,d=GR();l.forEach(h=>{if(!o.has(h)){const f=JR(n.get(h),r.get(h));null!==f&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return y.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return M.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):ey(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):y.resolve(Gn());let a=-1,u=o;return s.next(c=>y.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?y.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,K())).next(l=>({batchId:a,changes:HR(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new M(n)).next(r=>{let i=xu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=xu();return this.indexManager.getCollectionParents(e,o).next(a=>y.forEach(a,u=>{const c=(d=n,h=u.child(o),new pr(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt));var d,h;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,c)=>{const l=c.getKey();null===s.get(l)&&(s=s.insert(l,be.newInvalidDocument(l)))});let a=xu();return s.forEach((u,c)=>{const l=o.get(u);void 0!==l&&Ou(l.mutation,c,qt.empty(),Ve.now()),Pu(n,c)&&(a=a.insert(u,c))}),a})}}class xz{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return y.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(i=n).id,version:i.version,createTime:Ge(i.createTime)}),y.resolve();var i}getNamedQuery(e,n){return y.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(i=n).name,query:py(i.bundledQuery),readTime:Ge(i.readTime)}),y.resolve();var i}}class Nz{constructor(){this.overlays=new Te(M.comparator),this.hr=new Map}getOverlay(e,n){return y.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gn();return y.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),y.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),y.resolve()}getOverlaysForCollection(e,n,r){const i=Gn(),o=n.length+1,s=new M(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return y.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Te((c,l)=>c-l);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=o.get(c.largestBatchId);null===l&&(l=Gn(),o=o.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=Gn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return y.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new sy(n,r));let o=this.hr.get(n);void 0===o&&(o=K(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}}class Iy{constructor(){this.Pr=new me(ot.Ir),this.Tr=new me(ot.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new ot(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ot(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new M(new Z([])),r=new ot(n,e),i=new ot(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new M(new Z([])),r=new ot(n,e),i=new ot(n,e+1);let o=K();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new ot(e,0),r=this.Pr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class ot{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return M.comparator(e.key,n.key)||U(e.pr,n.pr)}static Er(e,n){return U(e.pr,n.pr)||M.comparator(e.key,n.key)}}class Vz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new me(ot.Ir)}checkEmpty(e){return y.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.yr;this.yr++;const s=new iy(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.wr=this.wr.add(new ot(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return y.resolve(s)}lookupMutationBatch(e,n){return y.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.br(n+1),o=i<0?0:i;return y.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return y.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ot(n,0),i=new ot(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{const a=this.Sr(s.pr);o.push(a)}),y.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new me(U);return n.forEach(i=>{const o=new ot(i,0),s=new ot(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),y.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;M.isDocumentKey(o)||(o=o.child(""));const s=new ot(new M(o),0);let a=new me(U);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.pr)),!0)},s),y.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){O(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return y.forEach(n.mutations,i=>{const o=new ot(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new ot(n,0),i=this.wr.firstAfterOrEqual(r);return y.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return y.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Oz{constructor(e){this.vr=e,this.docs=new Te(M.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return y.resolve(r?r.document.mutableCopy():be.newInvalidDocument(n))}getEntries(e,n){let r=zt();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():be.newInvalidDocument(i))}),y.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=zt();const s=n.path,a=new M(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:l}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||G_(iR(l),r)<=0||(i.has(l.key)||Pu(n,l))&&(o=o.insert(l.key,l.mutableCopy()))}return y.resolve(o)}getAllFromCollectionGroup(e,n,r,i){N()}Fr(e,n){return y.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Fz(this)}getSize(e){return y.resolve(this.size)}}class Fz extends Sz{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),y.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class kz{constructor(e){this.persistence=e,this.Mr=new gr(n=>ki(n),Mu),this.lastRemoteSnapshotVersion=F.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Iy,this.targetCount=0,this.Br=qi.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),y.resolve()}getLastRemoteSnapshotVersion(e){return y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return y.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),y.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new qi(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,y.resolve()}updateTargetData(e,n){return this.qn(n),y.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,y.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),y.waitFor(o).next(()=>i)}getTargetCount(e){return y.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return y.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),y.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),y.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),y.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return y.resolve(r)}containsKey(e,n){return y.resolve(this.Nr.containsKey(n))}}class Dy{constructor(e,n){this.Lr={},this.overlays={},this.kr=new nn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new kz(this),this.indexManager=new Dz,this.remoteDocumentCache=new Oz(r=>this.referenceDelegate.Kr(r)),this.serializer=new AP(n),this.$r=new xz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Nz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new Vz(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){w("MemoryPersistence","Starting transaction:",e);const i=new Lz(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return y.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class Lz extends sq{constructor(e){super(),this.currentSequenceNumber=e}}class ph{constructor(e){this.persistence=e,this.zr=new Iy,this.jr=null}static Hr(e){return new ph(e)}get Jr(){if(this.jr)return this.jr;throw N()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),y.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),y.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),y.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return y.forEach(this.Jr,r=>{const i=M.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,F.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return y.or([()=>y.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class Ay{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=K(),i=K();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Ay(e,n.fromCache,r,i)}}class jz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class tx{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function A9(){return!function C9(){var t;const e=null===(t=pd())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()?8:hn.v(Lr())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new jz;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(rs()<=oe.DEBUG&&w("QueryEngine","SDK will not create cache indexes for query:",hs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),y.resolve()):(rs()<=oe.DEBUG&&w("QueryEngine","Query:",hs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(rs()<=oe.DEBUG&&w("QueryEngine","The SDK decides to create cache indexes for query:",hs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kt(n))):y.resolve())}ji(e,n){if(kR(n))return y.resolve(null);let r=kt(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=th(n,null,"F"),r=kt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=K(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Zi(n,a);return this.Xi(n,c,s,u.readTime)?this.ji(e,th(n,null,"F")):this.es(e,c,n,u)}))})))}Hi(e,n,r,i){return kR(n)||i.isEqual(F.min())?y.resolve(null):this.zi.getDocuments(e,r).next(o=>{const s=this.Zi(n,o);return this.Xi(n,s,r,i)?y.resolve(null):(rs()<=oe.DEBUG&&w("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hs(n)),this.es(e,s,n,function rR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=F.fromTimestamp(1e9===r?new Ve(n+1,0):new Ve(n,r));return new tn(i,M.empty(),e)}(i,-1)).next(a=>a))})}Zi(e,n){let r=new me(UR(e));return n.forEach((i,o)=>{Pu(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return rs()<=oe.DEBUG&&w("QueryEngine","Using full collection scan to execute query:",hs(n)),this.zi.getDocumentsMatchingQuery(e,n,tn.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}class Uz{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Te(U),this.rs=new gr(o=>ki(o),Mu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JP(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function rx(t,e){return by.apply(this,arguments)}function by(){return by=x(function*(t,e){const n=S(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=K();for(const c of i){s.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of o){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:s,addedBatchIds:a}))})})}),by.apply(this,arguments)}function ix(t){const e=S(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Gz(t,e){const n=S(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ts(t,e,n){return Sy.apply(this,arguments)}function Sy(){return Sy=x(function*(t,e,n){const r=S(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Gr(s))throw s;w("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),Sy.apply(this,arguments)}function _h(t,e,n){const r=S(t);let i=F.min(),o=K();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,l){const d=S(u),h=d.rs.get(l);return void 0!==h?y.resolve(d.ns.get(h)):d.Qr.getTargetData(c,l)}(r,s,kt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:F.min(),n?o:K())).next(a=>(function ux(t,e,n){let r=t.ss.get(e)||F.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}(r,function jR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,hs:o})))}class Ny{constructor(){this.activeTargetIds=function ny(){return qq}()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dx{constructor(){this.no=new Ny,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Ny,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Wz{io(e){}shutdown(){}}class hx{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){w("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){w("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Eh=null;function Oy(){return null===Eh?Eh=268435456+Math.round(2147483648*Math.random()):Eh++,"0x"+Eh.toString(16)}const Qz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Kz{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Ct="WebChannelConnection";class Yz extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){const a=Oy(),u=this.bo(n,r.toUriEncodedString());w("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,s),this.Co(n,u,c,i).then(l=>(w("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw en("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+ns,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){return`${this.fo}/v1/${r}:${Qz[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const o=Oy();return new Promise((s,a)=>{const u=new Q6;u.setWithCredentials(!0),u.listenOnce(z6.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case U_.NO_ERROR:const l=u.getResponseJson();w(Ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case U_.TIMEOUT:w(Ct,`RPC '${e}' ${o} timed out`),a(new T(v.DEADLINE_EXCEEDED,"Request time out"));break;case U_.HTTP_ERROR:const d=u.getStatus();if(w(Ct,`RPC '${e}' ${o} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const p=function(m){const E=m.toLowerCase().replace(/_/g,"-");return Object.values(v).indexOf(E)>=0?E:v.UNKNOWN}(f.status);a(new T(p,f.message))}else a(new T(v.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new T(v.UNAVAILABLE,"Connection failed."));break;default:N()}}finally{w(Ct,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);w(Ct,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}Fo(e,n,r){const i=Oy(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=G6(),a=q6(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const l=o.join("");w(Ct,`Creating RPC '${e}' stream ${i}: ${l}`,u);const d=s.createWebChannel(l,u);let h=!1,f=!1;const p=new Kz({lo:m=>{f?w(Ct,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(w(Ct,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),w(Ct,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},ho:()=>d.close()}),g=(m,E,_)=>{m.listen(E,I=>{try{_(I)}catch(C){setTimeout(()=>{throw C},0)}})};return g(d,Gd.EventType.OPEN,()=>{f||w(Ct,`RPC '${e}' stream ${i} transport opened.`)}),g(d,Gd.EventType.CLOSE,()=>{f||(f=!0,w(Ct,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),g(d,Gd.EventType.ERROR,m=>{f||(f=!0,en(Ct,`RPC '${e}' stream ${i} transport errored:`,m),p.Vo(new T(v.UNAVAILABLE,"The operation could not be completed")))}),g(d,Gd.EventType.MESSAGE,m=>{var E;if(!f){const _=m.data[0];O(!!_);const C=_.error||(null===(E=_[0])||void 0===E?void 0:E.error);if(C){w(Ct,`RPC '${e}' stream ${i} received error:`,C);const V=C.status;let W=function(rc){const Bh=Qe[rc];if(void 0!==Bh)return oP(Bh)}(V),ge=C.message;void 0===W&&(W=v.INTERNAL,ge="Unknown error status: "+V+" with message "+C.message),f=!0,p.Vo(new T(W,ge)),d.close()}else w(Ct,`RPC '${e}' stream ${i} received:`,_),p.mo(_)}}),g(a,W6.STAT_EVENT,m=>{m.stat===ZM.PROXY?w(Ct,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===ZM.NOPROXY&&w(Ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}}function Ih(){return typeof document<"u"?document:null}function Qu(t){return new oz(t,!0)}class Fy{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&w("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class px{constructor(e,n,r,i,o,s,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Fy(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return x(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return x(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var r=this;return x(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():n&&n.code===v.RESOURCE_EXHAUSTED?(He(n.toString()),He("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):n&&n.code===v.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new T(v.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo(x(function*(){e.state=0,e.start()}))}__(e){return w("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(w("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zz extends px{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function uz(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:N(),i=e.targetChange.targetIds||[],o=function(c,l){return c.useProto3Json?(O(void 0===l||"string"==typeof l),Je.fromBase64String(l||"")):(O(void 0===l||l instanceof Uint8Array),Je.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const l=void 0===c.code?v.UNKNOWN:oP(c.code);return new T(l,c.message||"")}(s);n=new lP(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=qn(t,r.document.name),o=Ge(r.document.updateTime),s=r.document.createTime?Ge(r.document.createTime):F.min(),a=new ft({mapValue:{fields:r.document.fields}}),u=be.newFoundDocument(i,o,s,a);n=new sh(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=qn(t,r.document),o=r.readTime?Ge(r.readTime):F.min(),s=be.newNoDocument(i,o);n=new sh([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=qn(t,r.document);n=new sh([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return N();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new Jq(i,o);n=new cP(r.targetId,s)}}var c;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return F.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?F.min():s.readTime?Ge(s.readTime):F.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=dy(this.serializer),n.addTarget=function(o,s){let a;const u=s.target;if(a=Jd(u)?{documents:IP(o,u)}:{query:fy(o,u).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=pP(o,s.resumeToken);const c=uy(o,s.expectedCount);null!==c&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(F.min())>0){a.readTime=_s(o,s.snapshotVersion.toTimestamp());const c=uy(o,s.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function lz(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return N()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=dy(this.serializer),n.removeTarget=e,this.t_(n)}}class Xz extends px{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(O(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function cz(t,e){return t&&t.length>0?(O(void 0!==e),t.map(n=>function(i,o){let s=Ge(i.updateTime?i.updateTime:o);return s.isEqual(F.min())&&(s=Ge(o)),new Kq(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Ge(e.commitTime);return this.listener.T_(r,n)}return O(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=dy(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function ju(t,e){let n;if(e instanceof gs)n={update:vP(t,e.key,e.value)};else if(e instanceof ms)n={delete:Bu(t,e.key)};else if(e instanceof mr)n={update:vP(t,e.key,e.data),updateMask:pz(e.fieldMask)};else{if(!(e instanceof ry))return N();n={verify:Bu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof fs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Li)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ps)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw N()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:sz(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:N()),n;var o}(this.serializer,r))};this.t_(n)}}class Jz extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new T(v.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,ly(n,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new T(v.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,ly(n,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new T(v.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class t5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(He(n),this.g_=!1):w("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class n5{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(a=>{r.enqueueAndForget(x(function*(){var u;ti(s)&&(w("RemoteStore","Restarting streams for network reachability change."),yield(u=x(function*(l){const d=S(l);d.v_.add(4),yield Cs(d),d.x_.set("Unknown"),d.v_.delete(4),yield Ku(d)}),function c(l){return u.apply(this,arguments)})(s))}))}),this.x_=new t5(r,i)}}function Ku(t){return Ly.apply(this,arguments)}function Ly(){return Ly=x(function*(t){if(ti(t))for(const e of t.F_)yield e(!0)}),Ly.apply(this,arguments)}function Cs(t){return By.apply(this,arguments)}function By(){return By=x(function*(t){for(const e of t.F_)yield e(!1)}),By.apply(this,arguments)}function Dh(t,e){const n=S(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),$y(n)?Uy(n):bs(n).Jo()&&jy(n,e))}function Yu(t,e){const n=S(t),r=bs(n);n.C_.delete(e),r.Jo()&&gx(n,e),0===n.C_.size&&(r.Jo()?r.Xo():ti(n)&&n.x_.set("Unknown"))}function jy(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(F.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bs(t).c_(e)}function gx(t,e){t.O_.Oe(e),bs(t).l_(e)}function Uy(t){t.O_=new tz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),bs(t).start(),t.x_.p_()}function $y(t){return ti(t)&&!bs(t).Ho()&&t.C_.size>0}function ti(t){return 0===S(t).v_.size}function mx(t){t.O_=void 0}function r5(t){return Hy.apply(this,arguments)}function Hy(){return Hy=x(function*(t){t.C_.forEach((e,n)=>{jy(t,e)})}),Hy.apply(this,arguments)}function i5(t,e){return Gy.apply(this,arguments)}function Gy(){return Gy=x(function*(t,e){mx(t),$y(t)?(t.x_.S_(e),Uy(t)):t.x_.set("Unknown")}),Gy.apply(this,arguments)}function o5(t,e,n){return qy.apply(this,arguments)}function qy(){return qy=x(function*(t,e,n){if(t.x_.set("Online"),e instanceof lP&&2===e.state&&e.cause)try{yield(r=x(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.C_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.C_.delete(u),o.O_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){w("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wh(t,r)}else if(e instanceof sh?t.O_.$e(e):e instanceof cP?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(F.min()))try{const r=yield ix(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.O_.it(s);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const l=o.C_.get(c);l&&o.C_.set(c,l.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,c)=>{const l=o.C_.get(u);if(!l)return;o.C_.set(u,l.withResumeToken(Je.EMPTY_BYTE_STRING,l.snapshotVersion)),gx(o,u);const d=new _r(l.target,u,c,l.sequenceNumber);jy(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){w("RemoteStore","Failed to raise snapshot:",r),yield wh(t,r)}var r}),qy.apply(this,arguments)}function wh(t,e,n){return zy.apply(this,arguments)}function zy(){return zy=x(function*(t,e,n){if(!Gr(e))throw e;t.v_.add(1),yield Cs(t),t.x_.set("Offline"),n||(n=()=>ix(t.localStore)),t.asyncQueue.enqueueRetryable(x(function*(){w("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Ku(t)}))}),zy.apply(this,arguments)}function _x(t,e){return e().catch(n=>wh(t,n,e))}function As(t){return Wy.apply(this,arguments)}function Wy(){return Wy=x(function*(t){const e=S(t),n=ni(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;s5(e);)try{const i=yield Gz(e.localStore,r);if(null===i){0===e.D_.length&&n.Xo();break}r=i.batchId,a5(e,i)}catch(i){yield wh(e,i)}yx(e)&&vx(e)}),Wy.apply(this,arguments)}function s5(t){return ti(t)&&t.D_.length<10}function a5(t,e){t.D_.push(e);const n=ni(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function yx(t){return ti(t)&&!ni(t).Ho()&&t.D_.length>0}function vx(t){ni(t).start()}function u5(t){return Qy.apply(this,arguments)}function Qy(){return Qy=x(function*(t){ni(t).d_()}),Qy.apply(this,arguments)}function c5(t){return Ky.apply(this,arguments)}function Ky(){return Ky=x(function*(t){const e=ni(t);for(const n of t.D_)e.I_(n.mutations)}),Ky.apply(this,arguments)}function l5(t,e,n){return Yy.apply(this,arguments)}function Yy(){return Yy=x(function*(t,e,n){const r=t.D_.shift(),i=oy.from(r,e,n);yield _x(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield As(t)}),Yy.apply(this,arguments)}function d5(t,e){return Zy.apply(this,arguments)}function Zy(){return Zy=x(function*(t,e){var n;e&&ni(t).P_&&(yield(n=x(function*(i,o){if(function iP(t){switch(t){default:return N();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0}}(a=o.code)&&a!==v.ABORTED){const s=i.D_.shift();ni(i).Zo(),yield _x(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield As(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),yx(t)&&vx(t)}),Zy.apply(this,arguments)}function Ex(t,e){return Xy.apply(this,arguments)}function Xy(){return Xy=x(function*(t,e){const n=S(t);n.asyncQueue.verifyOperationInProgress(),w("RemoteStore","RemoteStore received new credentials");const r=ti(n);n.v_.add(3),yield Cs(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Ku(n)}),Xy.apply(this,arguments)}function ev(){return ev=x(function*(t,e){const n=S(t);e?(n.v_.delete(2),yield Ku(n)):e||(n.v_.add(2),yield Cs(n),n.x_.set("Unknown"))}),ev.apply(this,arguments)}function bs(t){return t.N_||(t.N_=function(n,r,i){const o=S(n);return o.R_(),new Zz(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:r5.bind(null,t),To:i5.bind(null,t),u_:o5.bind(null,t)}),t.F_.push(function(){var e=x(function*(n){n?(t.N_.Zo(),$y(t)?Uy(t):t.x_.set("Unknown")):(yield t.N_.stop(),mx(t))});return function(n){return e.apply(this,arguments)}}())),t.N_}function ni(t){return t.B_||(t.B_=function(n,r,i){const o=S(n);return o.R_(),new Xz(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:u5.bind(null,t),To:d5.bind(null,t),E_:c5.bind(null,t),T_:l5.bind(null,t)}),t.F_.push(function(){var e=x(function*(n){n?(t.B_.Zo(),yield As(t)):(yield t.B_.stop(),t.D_.length>0&&(w("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))});return function(n){return e.apply(this,arguments)}}())),t.B_}class tv{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Xe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new tv(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new T(v.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ss(t,e){if(He("AsyncQueue",`${e}: ${t}`),Gr(t))return new T(v.UNAVAILABLE,`${e}: ${t}`);throw t}class Ms{constructor(e){this.comparator=e?(n,r)=>e(n,r)||M.comparator(n.key,r.key):(n,r)=>M.comparator(n.key,r.key),this.keyedMap=xu(),this.sortedSet=new Te(this.comparator)}static emptySet(e){return new Ms(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ms)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Ms;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Ix{constructor(){this.L_=new Te(M.comparator)}track(e){const n=e.doc.key,r=this.L_.get(n);r?0!==e.type&&3===r.type?this.L_=this.L_.insert(n,e):3===e.type&&1!==r.type?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.L_=this.L_.remove(n):1===e.type&&2===r.type?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):N():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Rs{constructor(e,n,r,i,o,s,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Rs(e,n,Ms.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ru(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class h5{constructor(){this.q_=void 0,this.Q_=[]}}class f5{constructor(){this.queries=new gr(e=>BR(e),Ru),this.onlineState="Unknown",this.K_=new Set}}function rv(){return rv=x(function*(t,e){const n=S(t),r=e.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new h5),i)try{o.q_=yield n.onListen(r)}catch(s){const a=Ss(s,`Initialization of query '${hs(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.Q_.push(e),e.U_(n.onlineState),o.q_&&e.W_(o.q_)&&sv(n)}),rv.apply(this,arguments)}function p5(t,e){const n=S(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.Q_)a.W_(i)&&(r=!0);s.q_=i}}r&&sv(n)}function g5(t,e,n){const r=S(t),i=r.queries.get(e);if(i)for(const o of i.Q_)o.onError(n);r.queries.delete(e)}function sv(t){t.K_.forEach(e=>{e.next()})}class av{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Rs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){return!e.fromCache||(!this.options.Z_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=Rs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class Tx{constructor(e){this.key=e}}class Cx{constructor(e){this.key=e}}class Ax{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=K(),this.mutatedKeys=K(),this.ua=UR(e),this.ca=new Ms(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new Ix,i=n?n.ca:this.ca;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const h=i.get(l),f=Pu(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),m=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),m=!0,(u&&this.ua(f,u)>0||c&&this.ua(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(u||c)&&(a=!0)),m&&(f?(s=s.add(f),o=g?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const l="F"===this.query.limitType?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ca:s,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort((l,d)=>function(f,p){const g=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return N()}};return g(f)-g(p)}(l.type,d.type)||this.ua(l.doc,d.doc)),this.Ta(r),i=null!=i&&i;const a=n&&!i?this.Ea():[],u=0===this.aa.size&&this.current&&!i?1:0,c=u!==this._a;return this._a=u,0!==s.length||c?{snapshot:new Rs(this.query,e.ca,o,s,e.mutatedKeys,0===u,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Ix,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=K(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new Cx(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new Tx(r))}),n}Ra(e){this.oa=e.hs,this.aa=K();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Rs.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class y5{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class v5{constructor(e){this.key=e,this.ma=!1}}class E5{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new gr(a=>BR(a),Ru),this.pa=new Map,this.ya=new Set,this.wa=new Te(M.comparator),this.Sa=new Map,this.ba=new Iy,this.Da={},this.Ca=new Map,this.va=qi.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function I5(t,e){return uv.apply(this,arguments)}function uv(){return uv=x(function*(t,e){const n=function Pv(t){const e=S(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=bx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=T5.bind(null,e),e.fa.u_=p5.bind(null,e.eventManager),e.fa.xa=g5.bind(null,e.eventManager),e}(t);let r,i;const o=n.ga.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{const s=yield function ws(t,e){const n=S(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,y.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new _r(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}(n.localStore,kt(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield function cv(t,e,n,r,i){return lv.apply(this,arguments)}(n,e,r,"current"===a,s.resumeToken),n.isPrimaryClient&&Dh(n.remoteStore,s)}return i}),uv.apply(this,arguments)}function lv(){return lv=x(function*(t,e,n,r,i){t.Ma=(d,h,f)=>{return(p=x(function*(m,E,_,I){let C=E.view.ha(_);C.Xi&&(C=yield _h(m.localStore,E.query,!1).then(({documents:et})=>E.view.ha(et,C)));const V=I&&I.targetChanges.get(E.targetId),W=I&&null!=I.targetMismatches.get(E.targetId),ge=E.view.applyChanges(C,m.isPrimaryClient,V,W);return Ev(m,E.targetId,ge.da),ge.snapshot}),function g(m,E,_,I){return p.apply(this,arguments)})(t,d,h,f);var p};const o=yield _h(t.localStore,e,!0),s=new Ax(e,o.hs),a=s.ha(o.documents),u=Lu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=s.applyChanges(a,t.isPrimaryClient,u);Ev(t,n,c.da);const l=new y5(e,n,s);return t.ga.set(e,l),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),c.snapshot}),lv.apply(this,arguments)}function D5(t,e){return dv.apply(this,arguments)}function dv(){return dv=x(function*(t,e){const n=S(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(o=>!Ru(o,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ts(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Yu(n.remoteStore,r.targetId),Ps(n,r.targetId)}).catch(Hr))):(Ps(n,r.targetId),yield Ts(n.localStore,r.targetId,!0))}),dv.apply(this,arguments)}function hv(){return hv=x(function*(t,e,n){const r=function xv(t){const e=S(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A5.bind(null,e),e}(t);try{const i=yield function(s,a){const u=S(s),c=Ve.now(),l=a.reduce((f,p)=>f.add(p.key),K());let d,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=zt(),g=K();return u.os.getEntries(f,l).next(m=>{p=m,p.forEach((E,_)=>{_.isValidDocument()||(g=g.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,p)).next(m=>{d=m;const E=[];for(const _ of a){const I=Zq(_,d.get(_.key).overlayedDocument);null!=I&&E.push(new mr(_.key,I,TR(I.value.mapValue),Pe.exists(!0)))}return u.mutationQueue.addMutationBatch(f,c,E,a)}).next(m=>{h=m;const E=m.applyToLocalDocumentSet(d,g);return u.documentOverlayCache.saveOverlays(f,m.batchId,E)})}).then(()=>({batchId:h.batchId,changes:HR(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let c=s.Da[s.currentUser.toKey()];c||(c=new Te(U)),c=c.insert(a,u),s.Da[s.currentUser.toKey()]=c}(r,i.batchId,n),yield yr(r,i.changes),yield As(r.remoteStore)}catch(i){const o=Ss(i,"Failed to persist write");n.reject(o)}}),hv.apply(this,arguments)}function bx(t,e){return fv.apply(this,arguments)}function fv(){return fv=x(function*(t,e){const n=S(t);try{const r=yield function Hz(t,e){const n=S(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((l,d)=>{const h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(o,l.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);var g,m,E;null!==e.targetMismatches.get(d)?f=f.withResumeToken(Je.EMPTY_BYTE_STRING,F.min()).withLastLimboFreeSnapshotVersion(F.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),m=f,E=l,(0===(g=h).resumeToken.approximateByteSize()||m.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8||E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0)&&a.push(n.Qr.updateTargetData(o,f))});let u=zt(),c=K();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(function ox(t,e,n){let r=K(),i=K();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=zt();return n.forEach((a,u)=>{const c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(F.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):w("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{cs:s,ls:i}})}(o,s,e.documentUpdates).next(l=>{u=l.cs,c=l.ls})),!r.isEqual(F.min())){const l=n.Qr.getLastRemoteSnapshotVersion(o).next(d=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return y.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(n.ns=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Sa.get(o);s&&(O(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?O(s.ma):i.removedDocuments.size>0&&(O(s.ma),s.ma=!1))}),yield yr(n,r,e)}catch(r){yield Hr(r)}}),fv.apply(this,arguments)}function Sx(t,e,n){const r=S(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ga.forEach((o,s)=>{const a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=S(s);u.onlineState=a;let c=!1;u.queries.forEach((l,d)=>{for(const h of d.Q_)h.U_(a)&&(c=!0)}),c&&sv(u)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function T5(t,e,n){return pv.apply(this,arguments)}function pv(){return pv=x(function*(t,e,n){const r=S(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),o=i&&i.key;if(o){let s=new Te(M.comparator);s=s.insert(o,be.newNoDocument(o,F.min()));const a=K().add(o),u=new ku(F.min(),new Map,new Te(U),s,a);yield bx(r,u),r.wa=r.wa.remove(o),r.Sa.delete(e),Iv(r)}else yield Ts(r.localStore,e,!1).then(()=>Ps(r,e,n)).catch(Hr)}),pv.apply(this,arguments)}function C5(t,e){return gv.apply(this,arguments)}function gv(){return gv=x(function*(t,e){const n=S(t),r=e.batch.batchId;try{const i=yield function $z(t,e){const n=S(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,l){const d=c.batch,h=d.keys();let f=y.resolve();return h.forEach(p=>{f=f.next(()=>l.getEntry(u,p)).next(g=>{const m=c.docVersions.get(p);O(null!==m),g.version.compareTo(m)<0&&(d.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),l.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=K();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);vv(n,r,null),yv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield yr(n,i)}catch(i){yield Hr(i)}}),gv.apply(this,arguments)}function A5(t,e,n){return mv.apply(this,arguments)}function mv(){return mv=x(function*(t,e,n){const r=S(t);try{const i=yield function(s,a){const u=S(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(O(null!==d),l=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,l,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>u.localDocuments.getDocuments(c,l))})}(r.localStore,e);vv(r,e,n),yv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield yr(r,i)}catch(i){yield Hr(i)}}),mv.apply(this,arguments)}function yv(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function vv(t,e,n){const r=S(t);let i=r.Da[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function Ps(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||Mx(t,r)})}function Mx(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);null!==n&&(Yu(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),Iv(t))}function Ev(t,e,n){for(const r of n)r instanceof Tx?(t.ba.addReference(r.key,e),S5(t,r)):r instanceof Cx?(w("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||Mx(t,r.key)):N()}function S5(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(w("SyncEngine","New document in limbo: "+n),t.ya.add(r),Iv(t))}function Iv(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new M(Z.fromString(e)),r=t.va.next();t.Sa.set(r,new v5(n)),t.wa=t.wa.insert(n,r),Dh(t.remoteStore,new _r(kt(ls(n.path)),r,"TargetPurposeLimboResolution",nn._e))}}function yr(t,e,n){return Dv.apply(this,arguments)}function Dv(){return Dv=x(function*(t,e,n){const r=S(t),i=[],o=[],s=[];var a;r.ga.isEmpty()||(r.ga.forEach((a,u)=>{s.push(r.Ma(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const l=Ay.Ki(u.targetId,c);o.push(l)}}))}),yield Promise.all(s),r.fa.u_(i),yield(a=x(function*(c,l){const d=S(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>y.forEach(l,f=>y.forEach(f.qi,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>y.forEach(f.Qi,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Gr(h))throw h;w("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const f=h.targetId;if(!h.fromCache){const p=d.ns.get(f),m=p.withLastLimboFreeSnapshotVersion(p.snapshotVersion);d.ns=d.ns.insert(f,m)}}}),function u(c,l){return a.apply(this,arguments)})(r.localStore,o))}),Dv.apply(this,arguments)}function M5(t,e){return wv.apply(this,arguments)}function wv(){return wv=x(function*(t,e){const n=S(t);if(!n.currentUser.isEqual(e)){w("SyncEngine","User change. New user:",e.toKey());const r=yield rx(n.localStore,e);n.currentUser=e,(o=n).Ca.forEach(a=>{a.forEach(u=>{u.reject(new T(v.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ca.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield yr(n,r.us)}var o}),wv.apply(this,arguments)}function R5(t,e){const n=S(t),r=n.Sa.get(e);if(r&&r.ma)return K().add(r.key);{let i=K();const o=n.pa.get(e);if(!o)return i;for(const s of o){const a=n.ga.get(s);i=i.unionWith(a.view.la)}return i}}class Th{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return x(function*(){n.serializer=Qu(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return function nx(t,e,n,r){return new Uz(t,e,n,r)}(this.persistence,new tx,e.initialUser,this.serializer)}createPersistence(e){return new Dy(ph.Hr,this.serializer)}createSharedClientState(e){return new dx}terminate(){var e=this;return x(function*(){var n,r;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class xs{initialize(e,n){var r=this;return x(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Sx(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=M5.bind(null,r.syncEngine),yield function Jy(t,e){return ev.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new f5}createDatastore(e){const n=Qu(e.databaseInfo.databaseId),r=new Yz(e.databaseInfo);return new Jz(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=n=>Sx(this.syncEngine,n,0),a=hx.D()?new hx:new Wz,new n5(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,n){return function(i,o,s,a,u,c,l){const d=new E5(i,o,s,a,u,c);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return x(function*(){var n,r;yield(r=x(function*(o){const s=S(o);w("RemoteStore","RemoteStore shutting down."),s.v_.add(5),yield Cs(s),s.M_.shutdown(),s.x_.set("Unknown")}),function i(o){return r.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}class Ch{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):He("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class H5{constructor(e,n,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=rt.UNAUTHENTICATED,this.clientId=tR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=x(function*(a){w("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(w("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Xe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(x(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Ss(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function Ah(t,e){return Nv.apply(this,arguments)}function Nv(){return Nv=x(function*(t,e){t.asyncQueue.verifyOperationInProgress(),w("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=x(function*(o){r.isEqual(o)||(yield rx(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),Nv.apply(this,arguments)}function Vv(t,e){return Ov.apply(this,arguments)}function Ov(){return Ov=x(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function Fv(t){return kv.apply(this,arguments)}(t);w("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ex(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Ex(e.remoteStore,i)),t._onlineComponents=e}),Ov.apply(this,arguments)}function kv(){return kv=x(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){w("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ah(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function Ox(t){return"FirebaseError"===t.name?t.code===v.FAILED_PRECONDITION||t.code===v.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;en("Error using user provided cache. Falling back to memory cache: "+n),yield Ah(t,new Th)}}else w("FirestoreClient","Using default OfflineComponentProvider"),yield Ah(t,new Th);return t._offlineComponents}),kv.apply(this,arguments)}function bh(t){return Lv.apply(this,arguments)}function Lv(){return Lv=x(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(w("FirestoreClient","Using user provided OnlineComponentProvider"),yield Vv(t,t._uninitializedComponentsProvider._online)):(w("FirestoreClient","Using default OnlineComponentProvider"),yield Vv(t,new xs))),t._onlineComponents}),Lv.apply(this,arguments)}function Vs(t){return jv.apply(this,arguments)}function jv(){return jv=x(function*(t){const e=yield bh(t),n=e.eventManager;return n.onListen=I5.bind(null,e.syncEngine),n.onUnlisten=D5.bind(null,e.syncEngine),n}),jv.apply(this,arguments)}function Ux(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const $x=new Map;function Uv(t,e,n){if(!n)throw new T(v.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Hx(t){if(!M.isDocumentKey(t))throw new T(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Gx(t){if(M.isDocumentKey(t))throw new T(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Sh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":N()}function J(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new T(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sh(t);throw new T(v.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class zx{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new T(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new T(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function e8(t,e,n,r){if(!0===e&&!0===r)throw new T(v.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Ux(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new T(v.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new T(v.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new T(v.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new T(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new T(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zx(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Y6;switch(r.type){case"firstParty":return new eq(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new T(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$x.get(n);r&&(w("ComponentProvider","Removing Datastore"),$x.delete(n),r.terminate())}(this),Promise.resolve()}}class pt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pt(this.firestore,e,this._query)}}class qe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qe(this.firestore,e,this._key)}}class zn extends pt{constructor(e,n,r){super(e,n,ls(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new M(e))}withConverter(e){return new zn(this.firestore,e,this._path)}}function Wx(t,e,...n){if(t=Ti(t),Uv("collection","path",e),t instanceof Zu){const r=Z.fromString(e,...n);return Gx(r),new zn(t,null,r)}{if(!(t instanceof qe||t instanceof zn))throw new T(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Z.fromString(e,...n));return Gx(r),new zn(t.firestore,null,r)}}class r8{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Fy(this,"async_queue_retry"),this._u=()=>{const n=Ih();n&&w("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=Ih();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=Ih();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new Xe;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return x(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(n){if(!Gr(n))throw n;w("AsyncQueue","Operation failed with retryable error: "+n)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{throw this.ru=r,this.iu=!1,He("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);const i=tv.createAndSchedule(this,e,n,r,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&N()}verifyOperationInProgress(){}hu(){var e=this;return x(function*(){let n;do{n=e.Xa,yield n}while(n!==e.Xa)})()}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}function $v(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(t)}class Ce extends Zu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new r8,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Kx(this),this._firestoreClient.terminate()}}function ze(t){return t._firestoreClient||Kx(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Kx(t){var e,n,r;const i=t._freezeSettings(),o=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new Rq(t._databaseId,u,t._persistenceKey,(l=i).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Ux(l.experimentalLongPollingOptions),l.useFetchStreams));var u,l;t._firestoreClient=new H5(t._authCredentials,t._appCheckCredentials,t._queue,o),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class Wi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wi(Je.fromBase64String(e))}catch(n){throw new T(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wi(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Os{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new T(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Re(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hv{constructor(e){this._methodName=e}}class Gv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new T(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new T(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return U(this._lat,e._lat)||U(this._long,e._long)}}const a8=/^__.*__$/;class u8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new mr(e,this.data,this.fieldMask,n,this.fieldTransforms):new gs(e,this.data,n,this.fieldTransforms)}}function Jx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw N()}}class Mh{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Mh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Ph(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(Jx(this.du)&&a8.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class c8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qu(e)}Su(e,n,r,i=!1){return new Mh({du:e,methodName:n,wu:r,path:Re.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fs(t){const e=t._freezeSettings(),n=Qu(t._databaseId);return new c8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qv(t,e,n,r,i,o={}){const s=t.Su(o.merge||o.mergeFields?2:0,e,n,i);Yv("Data must be an object, but it was:",s,r);const a=iN(r,s);let u,c;if(o.merge)u=new qt(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const l=[];for(const d of o.mergeFields){const h=ec(e,d,n);if(!s.contains(h))throw new T(v.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);sN(l,h)||l.push(h)}u=new qt(l),c=s.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=s.fieldTransforms;return new u8(new ft(a),u,c)}class zv extends Hv{_toFieldTransform(e){return new Vu(e.path,new fs)}isEqual(e){return e instanceof zv}}function Qi(t,e){if(oN(t=Ti(t)))return Yv("Unsupported field value:",e,t),iN(t,e);if(t instanceof Hv)return function(r,i){if(!Jx(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=Qi(a,i.gu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=Ti(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return WR(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Ve.fromDate(r);return{timestampValue:_s(i.serializer,o)}}if(r instanceof Ve){const o=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_s(i.serializer,o)}}if(r instanceof Gv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wi)return{bytesValue:pP(i.serializer,r._byteString)};if(r instanceof qe){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:cy(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Sh(r)}`)}(t,e)}function iN(t,e){const n={};return gR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qr(t,(r,i)=>{const o=Qi(i,e.Ru(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function oN(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof Gv||t instanceof Wi||t instanceof qe||t instanceof Hv)}function Yv(t,e,n){if(!oN(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Sh(n);throw e.pu("an object"===r?t+" a custom object":t+" "+r)}var i}function ec(t,e,n){if((e=Ti(e))instanceof Os)return e._internalPath;if("string"==typeof e)return Rh(t,e);throw Ph("Field path arguments must be of type string or ",t,!1,void 0,n)}const l8=new RegExp("[~\\*/\\[\\]]");function Rh(t,e,n){if(e.search(l8)>=0)throw Ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Os(...e.split("."))._internalPath}catch{throw Ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ph(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new T(v.INVALID_ARGUMENT,a+t+u)}function sN(t,e){return t.some(n=>n.isEqual(e))}class Zv{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new d8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xh("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class d8 extends Zv{data(){return super.data()}}function xh(t,e){return"string"==typeof e?Rh(t,e):e instanceof Os?e._internalPath:e._delegate._internalPath}class Xv{}class uN extends Xv{}class tc extends uN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new tc(e,n,r)}_apply(e){const n=this._parse(e);return hN(e._query,n),new pt(e.firestore,e.converter,ty(e._query,n))}_parse(e){const n=Fs(e.firestore);return function(o,s,a,u,c,l,d){let h;if(c.isKeyField()){if("array-contains"===l||"array-contains-any"===l)throw new T(v.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if("in"===l||"not-in"===l){dN(d,l);const f=[];for(const p of d)f.push(lN(u,o,p));h={arrayValue:{values:f}}}else h=lN(u,o,d)}else"in"!==l&&"not-in"!==l&&"array-contains-any"!==l||dN(d,l),h=function rN(t,e,n,r=!1){return Qi(n,t.Su(r?4:3,e))}(a,"where",d,"in"===l||"not-in"===l);return X.create(c,l,h)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class ks extends Xv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ks(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:pe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)hN(s,u),s=ty(s,u)}(e._query,n),new pt(e.firestore,e.converter,ty(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Jv extends uN{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Jv(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new T(v.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new T(v.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Su(o,s)}(e._query,this._field,this._direction);return new pt(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new pr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function lN(t,e,n){if("string"==typeof(n=Ti(n))){if(""===n)throw new T(v.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ey(e)&&-1!==n.indexOf("/"))throw new T(v.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Z.fromString(n));if(!M.isDocumentKey(r))throw new T(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fi(t,new M(r))}if(n instanceof qe)return Fi(t,n._key);throw new T(v.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sh(n)}.`)}function dN(t,e){if(!Array.isArray(t)||0===t.length)throw new T(v.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hN(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new T(v.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class p8{convertValue(e,n="none"){switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw N()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return qr(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Gv(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Kd(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Tu(e));default:return null}}convertTimestamp(e){const n=zr(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Z.fromString(e);O(CP(r));const i=new Oi(r.get(1),r.get(3)),o=new M(r.popFirst(5));return i.isEqual(n)||He(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}class Ki{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ls extends Zv{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xh("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Fh extends Ls{data(e={}){return super.data(e)}}class Bs{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ki(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fh(this._firestore,this._userDataWriter,r.key,r,new Ki(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new T(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Fh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ki(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new Fh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ki(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,l=-1;return 0!==a.type&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:m8(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function m8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return N()}}class ri extends p8{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}}function _8(t,e){const n=J(t.firestore,Ce),r=function n8(t,e,...n){if(t=Ti(t),1===arguments.length&&(e=tR.newId()),Uv("doc","path",e),t instanceof Zu){const r=Z.fromString(e,...n);return Hx(r),new qe(t,null,new M(r))}{if(!(t instanceof qe||t instanceof zn))throw new T(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Z.fromString(e,...n));return Hx(r),new qe(t.firestore,t instanceof zn?t.converter:null,new M(r))}}(t),i=function eE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e);return function nc(t,e){return function(r,i){const o=new Xe;return r.asyncQueue.enqueueAndForget(x(function*(){return function w5(t,e,n){return hv.apply(this,arguments)}(yield function Bv(t){return bh(t).then(e=>e.syncEngine)}(r),i,o)})),o.promise}(ze(t),e)}(n,[qv(Fs(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Pe.exists(!1))]).then(()=>r)}!function(e,n=!0){ns="10.8.1",yd(new Ya("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Ce(new X6(r.getProvider("auth-internal")),new tq(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new T(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oi(c.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Qo(XM,"4.4.3",e),Qo(XM,"4.4.3","esm2017")}(),Qo("firebase","10.8.1","app");const _N=function o8(t,e){const n="object"==typeof t?t:function V3(t=md){const e=bi.get(t);if(!e&&t===md&&pS())return MS();if(!e)throw lr.create("no-app",{appName:t});return e}(),r="string"==typeof t?t:e||"(default)",i=function SS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=pd())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})("firestore");o&&function t8(t,e,n,r={}){var i;const o=(t=J(t,Zu))._getSettings(),s=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&en("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=rt.MOCK_USER;else{a=function T9(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fd(JSON.stringify({alg:"none",type:"JWT"})),fd(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new T(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new rt(c)}t._authCredentials=new Z6(new JM(a,u))}}(i,...o)}return i}(MS({apiKey:"AIzaSyDXJU63OadvS0u-knwHxfLh0zb06Dgu7bc",authDomain:"angulartodo-4c7.firebaseapp.com",projectId:"angulartodo-4c7",storageBucket:"angulartodo-4c7.appspot.com",messagingSenderId:"954368704969",appId:"1:954368704969:web:8464665623f6268c97e818"}));function O8(t,e){if(1&t&&(Pr(0,"li",7),Al(1),mi()),2&t){const n=e.$implicit;ll(1),dg(n.text)}}let F8=(()=>{class t{constructor(n){this.fb=n,this.todos=[],this.todoForm=this.fb.group({text:["",[IG.required]]})}ngOnInit(){const n=function h8(t,e,...n){let r=[];e instanceof Xv&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof ks).length,a=o.filter(u=>u instanceof tc).length;if(s>1||s>0&&a>0)throw new T(v.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}(Wx(_N,"todos"),function f8(t,e="asc"){const n=e,r=xh("orderBy",t);return Jv._create(r,n)}("created","desc"));!function y8(t,...e){var n,r,i;t=Ti(t);let o={includeMetadataChanges:!1},s=0;"object"!=typeof e[s]||$v(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges};if($v(e[s])){const d=e[s];e[s]=null===(n=d.next)||void 0===n?void 0:n.bind(d),e[s+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[s+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let u,c,l;if(t instanceof qe)c=J(t.firestore,Ce),l=ls(t._key.path),u={next:d=>{e[s]&&e[s](function tE(t,e,n){const r=n.docs.get(e._key),i=new ri(t);return new Ls(t,i,e._key,r,new Ki(n.hasPendingWrites,n.fromCache),e.converter)}(c,t,d))},error:e[s+1],complete:e[s+2]};else{const d=J(t,pt);c=J(d.firestore,Ce),l=d._query;const h=new ri(c);u={next:f=>{e[s]&&e[s](new Bs(c,h,d,f))},error:e[s+1],complete:e[s+2]},function aN(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new T(v.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query)}(function(h,f,p,g){const m=new Ch(g),E=new av(f,m,p);h.asyncQueue.enqueueAndForget(x(function*(){return function nv(t,e){return rv.apply(this,arguments)}(yield Vs(h),E)}))})(ze(c),l,a,u)}(n,i=>{this.todos=[],i.forEach(o=>{this.todos.push({id:o.id,...o.data()})})})}addTodo(){var n=this;return x(function*(){n.todoForm.valid&&(yield _8(Wx(_N,"todos"),{text:n.todoForm.value.text,created:new zv("serverTimestamp")}),n.todoForm.reset())})()}static#e=this.\u0275fac=function(r){return new(r||t)(A(l9))};static#t=this.\u0275cmp=YE({type:t,selectors:[["app-root"]],decls:9,vars:2,consts:[[1,"container","col-6","p-5","m-5","mx-auto"],[1,"display-1","text-center","mb-5","fw-bold"],[1,"d-flex","align-items-center","gap-4",3,"formGroup","ngSubmit"],["type","text","placeholder","What you wanna do today?","formControlName","text",1,"form-control","form-control-lg","p-3","shadow-sm","border-2"],[1,"btn","btn-primary","px-5","py-3","shadow-sm"],[1,"list-group","mt-5","shadow","fs-5"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(r,i){1&r&&(Pr(0,"div",0)(1,"h1",1),Al(2,"Todo App"),mi(),Pr(3,"form",2),un("ngSubmit",function(){return i.addTodo()}),rg(4,"input",3),Pr(5,"button",4),Al(6,"Add"),mi()(),Pr(7,"ul",5),function DT(t,e,n,r,i,o,s,a){const u=D(),c=re(),l=t+Y,d=c.firstCreatePass?function XL(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Mo(e,t,4,s||null,br(c,a));Gp(e,n,l,br(c,u)),Ac(e,l);const d=l.tView=Hp(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Pn(d,!1);const h=wT(c,u,d,t);Cc()&&qc(c,u,h,d),_t(h,u),hl(u,u[l]=zw(h,u,h,d)),Ic(d)&&Up(c,u,d),null!=s&&$p(u,d,a)}(8,O8,2,1,"li",6),mi()()),2&r&&(ll(3),Il("formGroup",i.todoForm),ll(5),Il("ngForOf",i.todos))},dependencies:[P0,Gb,ed,Mb,Rb,hd,Nm],encapsulation:2})}return t})(),k8=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=wr({type:t,bootstrap:[F8]});static#n=this.\u0275inj=Wn({imports:[X4,d9]})}return t})();Y4().bootstrapModule(k8).catch(t=>console.error(t))}},xe=>{xe(xe.s=544)}]);